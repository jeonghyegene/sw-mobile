<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>저장 견적</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* [v12] Master Guide CSS */
        /* Reset & Base */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f4f5f7;
            color: #333;
            font-size: 16px;
            line-height: 1.6;
            overflow-x: visible;
        }

        ul,
        li {
            list-style: none;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        button {
            font-family: inherit;
            border: none;
            cursor: pointer;
            background: none;
            padding: 0;
        }

        img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: block;
        }

        svg {
            stroke-width: 2;
            fill: none;
            stroke: currentColor;
            stroke-linecap: round;
            stroke-linejoin: round;
            flex-shrink: 0;
            display: block;
        }

        /* Layout */
        .mobile-wrap {
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
            background-color: #ffffff;
            padding-bottom: 20px;
        }

        /* Header (v12 Standard) */
        .app-header-sub {
            height: 56px;
            background: white;
            border-bottom: 1px solid #cccccc;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            cursor: pointer;
            transition: transform 0.2s;
            color: #333;
        }

        .header-btn:active {
            transform: scale(0.9);
        }

        .header-left {
            flex: 1 0 0;
            display: flex;
            justify-content: flex-start;
        }

        .header-title {
            flex: 3 0 0;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            color: #212121;
        }

        .header-right {
            flex: 1 0 0;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .btn-icon {
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            color: #333;
        }

        .btn-icon:active {
            transform: scale(0.9);
        }

        .btn-icon svg {
            width: 100%;
            height: 100%;
        }

        /* Buttons (v12 Standard + Primary) */
        .primary-button {
            background-color: #4e6ee4;
            color: white;
            height: 44px;
            padding: 7px 19px;
            border-radius: 6px;
            border: none;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: fit-content;
        }

        .primary-button:hover {
            background: #3d5dd3;
        }

        .primary-button:active {
            transform: scale(0.98);
        }

        .dark-button {
            background: #424242;
            color: white;
            height: 44px;
            padding: 7px 19px;
            border-radius: 6px;
            border: none;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: fit-content;
        }

        .dark-button:hover {
            background: #333;
        }

        .dark-button:active {
            transform: scale(0.98);
        }

        .white-button {
            background: white;
            color: #424242;
            height: 44px;
            padding: 7px 19px;
            border-radius: 6px;
            border: 1px solid #e8e8e9;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: fit-content;
        }

        .white-button-sm {
            height: 36px;
            font-size: 13px;
            padding: 0 12px;
        }

        .white-button:hover {
            background: #f9f9f9;
        }

        .white-button:active {
            transform: scale(0.98);
        }

        /* Special delete button style */
        .delete-button {
            background: white;
            color: #dc3545;
            border-color: #e8e8e9;
        }

        .delete-button:hover {
            border-color: #dc3545;
            background: #fefafa;
        }

        .dark-button:disabled,
        .white-button:disabled,
        .primary-button:disabled {
            background-color: #e9ecef;
            color: #adb5bd;
            border-color: #e9ecef;
            cursor: not-allowed;
        }

        /* Main Content */
        .sw-container {
            padding: 16px;
        }

        /* Info Section */
        .info-section {
            background: #f8f8f9;
            border: 1px solid #f0f0f0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .info-section .title {
            font-size: 14px;
            font-weight: 600;
            color: #666;
            margin-bottom: 8px;
        }

        /* Filter Chip Section */
        .filter-chip-section {
            background: #fff;
            padding: 8px 16px;
            margin: 0 -16px 16px -16px;
            border-bottom: 1px solid #e9e8e9;
        }

        .tabs-scroll-wrapper {
            overflow-x: auto;
            white-space: nowrap;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .tabs-scroll-wrapper::-webkit-scrollbar {
            display: none;
        }

        .filter-chip-section .tabs-scroll-wrapper {
            display: flex;
            gap: 8px;
        }

        /* v12 Standard .multi-chip */
        .multi-chip {
            display: inline-flex;
            align-items: center;
            /* Center the content vertically */
            padding: 6px 12px;
            border-radius: 100px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            flex-shrink: 0;
            white-space: nowrap;
        }

        .multi-chip-off {
            background: #fdfdfd;
            border: 1px solid #e6e4e4;
            color: #6d6d6d;
        }

        .multi-chip-on {
            background: #c7d3ff;
            border: 1px solid #4e6ee4;
            color: #4e6ee4;
        }

        /* [FIX] Multi-chip Icon visibility control */
        .multi-chip .check-icon {
            display: none;
            width: 16px;
            height: 16px;
            margin-right: 4px;
            color: #4e6ee4;
            flex-shrink: 0;
        }

        .multi-chip-on .check-icon {
            display: inline-flex;
            /* Show when active */
        }

        .multi-chip:active {
            transform: scale(0.95);
        }


        /* Filter Section (v15) */
        .filter-section {
            padding: 0 0 16px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Search (v12 Standard) */
        .search {
            width: 100%;
            height: 40px;
            background: #f9f9f9;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 12px;
            position: relative;
        }

        .search input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            font-size: 14px;
            color: black;
        }

        .search input::placeholder {
            color: #c6c6c8;
        }

        .search-input-right {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .search-del {
            width: 18px;
            height: 18px;
            cursor: pointer;
            display: none;
        }

        .search.has-text .search-del {
            display: flex;
        }

        .search-icon,
        .btn-search {
            width: 24px;
            height: 24px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn-search {
            color: #AAAAAD;
        }

        .search-icon:active,
        .btn-search:active {
            transform: scale(0.9);
        }


        /* Transaction List Header */
        .transaction-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 16px;
            font-size: 14px;
            color: #555;
            border-bottom: 1px solid #f0f0f0;
            margin-bottom: 16px;
        }

        /* Header Checkbox Wrapper */
        .header-checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .transaction-list-header .total-count strong {
            font-weight: 600;
            color: #333;
        }

        .transaction-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 24px;
            /* Pagination 여백 */
        }

        /* Estimate Card (Based on common-table-card) */
        .common-table-card {
            width: 100%;
            background: white;
            border: 1px solid #e8e8e9;
            border-radius: 6px;
            padding: 15px;
            position: relative;
        }

        .common-table-card.estimate-card {
            cursor: default;
            transition: background 0.2s;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .card-header .checkbox-text {
            flex: 1;
            min-width: 0;
            margin-right: 10px;
        }

        .card-date {
            font-size: 13px;
            font-weight: 500;
            color: #888;
            flex-shrink: 0;
        }

        .card-divider {
            width: 100%;
            height: 1px;
            background: #e8e8e9;
            margin: 12px 0;
        }

        .estimate-specs-row {
            font-size: 13px;
            color: #666;
            line-height: 1.6;
            word-break: keep-all;
            margin-bottom: 15px;
        }

        .card-footer {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            padding-top: 4px;
        }


        /* Checkbox (v12 Standard) */
        .checkbox {
            width: 20px;
            height: 20px;
            position: relative;
            cursor: pointer;
            user-select: none;
            flex-shrink: 0;
        }

        .checkbox-off {
            width: 100%;
            height: 100%;
            background: white;
            border: 1px solid #bdbdbd;
            border-radius: 2px;
        }

        .checkbox-on {
            width: 100%;
            height: 100%;
            background: #4e6ee4;
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .checkbox-on img {
            width: 14px;
            height: 14px;
        }

        .checkbox:active {
            transform: scale(0.9);
        }

        .checkbox-text {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            user-select: none;
        }

        .checkbox-text span {
            font-size: 16px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #333;
        }

        /* Pagination */
        .pagination {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 9px;
            margin-bottom: 24px;
        }

        .pagination-arrow {
            width: 15px;
            height: 15px;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pagination-arrow img {
            width: 100%;
            height: auto;
        }

        .pagination-arrow.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .pagination-numbers {
            display: flex;
            gap: 3px;
        }

        .pagination-number {
            min-width: 28px;
            height: 28px;
            padding: 4px 5px;
            border-radius: 4px;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .pagination-number.active {
            background: #4e6ee4;
            color: white;
        }

        /* Sticky Action Footer */
        .sticky-action-footer {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            background: #ffffff;
            border-top: 1px solid #e0e0e0;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
            padding: 16px;
            display: none;
            align-items: center;
            justify-content: space-between;
            z-index: 500;
            animation: slideUpFooter 0.3s ease-out;
        }

        .sticky-action-footer.active {
            display: flex;
        }

        @keyframes slideUpFooter {
            from {
                transform: translate(-50%, 100%);
            }

            to {
                transform: translate(-50%, 0);
            }
        }

        .sticky-action-footer .left-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            flex: 1;
        }

        .sticky-action-footer .total-count {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 0;
        }

        .sticky-action-footer .action-buttons {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .sticky-action-footer .white-button {
            height: 40px;
            font-size: 13px;
            padding: 0 12px;
        }

        .sticky-action-footer .dark-button {
            height: 40px;
            font-size: 13px;
            padding: 0 16px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 16px;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeInModal 0.2s ease-out;
        }

        @keyframes fadeInModal {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* [MODIFIED] Full Page Modal Styles */
        .modal-content {
            background: white;
            border-radius: 8px;
            width: 100%;
            max-width: 360px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            animation: scaleUpModal 0.2s ease-out;
        }

        /* Force full page style regardless of overlay padding */
        .modal-content.full-page-modal {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            /* Matches mobile-wrap */
            height: 100%;
            max-height: none;
            border-radius: 0;
            margin: 0;
            z-index: 1001;
        }

        @keyframes scaleUpModal {
            from {
                transform: scale(0.95);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border-bottom: 1px solid #e8e8e9;
            height: 57px;
            position: relative;
        }

        .modal-title {
            font-size: 16px;
            font-weight: 700;
            color: black;
            margin-bottom: 0;
            text-align: center;
            /* Center Title */
            flex: 1;
        }

        /* Modal Close Button */
        .btn-modal-close {
            width: 24px;
            height: 24px;
            cursor: pointer;
            color: #333;
            /* Absolute position for easy alignment */
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
        }

        /* [NEW] Share Button in Header */
        .header-share-btn {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            width: 24px;
            height: 24px;
            cursor: pointer;
            color: #333;
        }

        .header-share-btn:active,
        .btn-modal-close:active {
            transform: translateY(-50%) scale(0.9);
        }

        .header-share-btn:hover,
        .btn-modal-close:hover {
            color: #000;
        }

        .modal-body {
            padding: 16px;
            overflow-y: auto;
            flex-grow: 1;
        }

        .modal-footer {
            padding: 16px;
            border-top: 1px solid #e8e8e9;
            background: #fff;
            display: flex;
            gap: 8px;
            border-radius: 0 0 8px 8px;
        }

        /* Remove radius for full page modal footer */
        .full-page-modal .modal-footer {
            border-radius: 0;
        }

        .modal-footer .btn {
            flex: 1;
        }

        /* [MODIFIED] Primary Button for PDF Download */
        .modal-footer .primary-button {
            background-color: #4e6ee4;
            color: white;
            border: none;
        }


        /* Alert Modal */
        .alert-modal {
            background: white;
            border-radius: 6px;
            padding: 20px;
            text-align: center;
            width: 100%;
            max-width: 320px;
            position: relative;
        }

        .alert-modal .modal-title {
            text-align: center;
            margin-bottom: 15px;
        }

        .alert-modal .modal-message {
            font-size: 14px;
            color: black;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .modal-button {
            flex: 1;
            min-width: 90px;
            height: 44px;
            padding: 7px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .modal-button-primary {
            background: #dc3545;
            color: white;
            border: none;
            font-weight: 600;
        }

        .modal-button-confirm {
            background: #333;
            color: white;
            border: none;
            font-weight: 600;
        }

        .modal-button-secondary {
            background: white;
            color: #424242;
            border: 1px solid #bababa;
            font-weight: 600;
        }

        /* Common styles */
        .disclaimer {
            font-size: 12px;
            color: #888;
            margin-top: 8px;
            line-height: 1.5;
        }

        .no-transactions {
            padding: 40px 16px;
            text-align: center;
            color: #888;
            font-size: 14px;
        }

        /* Styles for Modal Content (Details) */
        .action-buttons-top {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .action-buttons-top .white-button,
        .action-buttons-top .dark-button {
            flex: 1;
            height: 40px;
            font-size: 13px;
            padding: 0 8px;
        }

        .detail-box {
            background: #f8f8f9;
            padding: 16px;
            border-radius: 6px;
            margin-bottom: 16px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .detail-row:last-child {
            margin-bottom: 0;
        }

        .detail-label {
            color: #555;
        }

        .detail-value {
            color: #333;
            font-weight: 500;
            text-align: right;
            word-break: keep-all;
        }

        .price-summary {
            border-top: 1px solid #e8e8e9;
            padding-top: 12px;
            margin-top: 12px;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .price-row.total {
            font-weight: 700;
            color: #333;
            font-size: 16px;
            margin-top: 8px;
            margin-bottom: 0;
        }

        /* Provider Info Box */
        .provider-info {
            font-size: 13px;
            color: #555;
            line-height: 1.6;
        }

        /* Table for Modals */
        .history-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            margin-bottom: 16px;
        }

        .history-table th {
            background: #f8f8f9;
            padding: 10px 8px;
            border-bottom: 1px solid #e8e8e9;
            color: #555;
            font-weight: 600;
            text-align: center;
            white-space: nowrap;
        }

        .history-table td {
            padding: 12px 8px;
            border-bottom: 1px solid #f0f0f0;
            color: #333;
            vertical-align: middle;
            text-align: center;
        }

        .history-table td.text-left {
            text-align: left;
        }

        /* Form Group for Modal */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        /* Input Group */
        .input-group {
            display: flex;
            gap: 8px;
        }

        .input-group .input {
            flex: 1;
        }

        .input-group .white-button,
        .input-group .dark-button {
            height: 40px;
            font-size: 13px;
            padding: 0 16px;
            width: auto;
            flex-shrink: 0;
        }

        .input {
            width: 100%;
            min-height: 40px;
            background: white;
            border: 1px solid #e8e8e9;
            border-radius: 6px;
            padding: 10px 12px;
            display: flex;
            align-items: center;
        }

        .input input,
        .input textarea {
            width: 100%;
            background: transparent;
            border: none;
            outline: none;
            font-size: 14px;
            color: black;
            line-height: 1.5;
            font-family: inherit;
        }

        .input textarea {
            resize: vertical;
        }

        /* [MODIFIED] Section Title in Modal */
        .modal-section-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
            border-bottom: 1px solid #e8e8e9;
            /* Light border */
            padding-bottom: 8px;
            margin-top: 20px;
        }

        .modal-section-title:first-child {
            margin-top: 0;
        }

        /* [MODIFIED] Comparison Cards Container (Vertical Stack) */
        .comparison-cards-container {
            display: flex;
            flex-direction: column;
            /* Stack vertically */
            gap: 16px;
        }

        .comparison-card {
            width: 100%;
            /* Take full width */
            max-width: none;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            overflow: hidden;
            padding: 16px;
            margin-bottom: 0;
            /* Handled by container gap */
        }

        .comparison-card .card-title-compare {
            font-size: 16px;
            font-weight: 700;
            color: #333;
            margin-bottom: 16px;
            text-align: center;
            padding-bottom: 8px;
            border-bottom: 1px dashed #e8e8e9;
        }

        .comparison-card .spec-group {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .comparison-card .spec-group .spec-label {
            color: #555;
            font-weight: 500;
            flex-shrink: 0;
            margin-right: 10px;
        }

        .comparison-card .spec-group .spec-value {
            color: #333;
            text-align: right;
            word-break: break-word;
        }

        .comparison-card .spec-group .spec-value.total {
            font-weight: 700;
            font-size: 16px;
        }

        /* [MODIFIED] Recipient Input Group (for detail/issue) */
        .recipient-input-group {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
            color: #333;
        }

        .recipient-input-group .input {
            flex: 1;
            padding: 10px 12px;
            height: 40px;
        }

        .recipient-input-group .input input {
            padding: 0;
        }

        .recipient-input-group .suffix {
            flex-shrink: 0;
            font-weight: 500;
        }

        /* [NEW] For Detail Modal's Recipient/Date fields */
        .form-group-recipient {
            margin-bottom: 12px;
        }

        .form-group-recipient .recipient-input-group {
            margin-bottom: 0;
        }


        /* ========================================
           [NEW] BOTTOM SHEET STYLES (for Email)
        ======================================== */
        .bottom-sheet-overlay.email-sheet {
            align-items: center;
            /* Center horizontally for email input */
        }

        .bottom-sheet.email-sheet {
            max-width: 360px;
            border-radius: 8px;
            animation: scaleUpModal 0.2s ease-out;
            /* Use modal animation */
            position: relative;
            transform: none;
            margin: 0;
            max-height: none;
        }

        .bottom-sheet.email-sheet .sheet-handle {
            display: none;
        }

        .bottom-sheet.email-sheet .sheet-header {
            height: 57px;
            margin-bottom: 0;
            padding: 16px;
            border-bottom: 1px solid #e8e8e9;
            justify-content: space-between;
            display: flex;
            /* Ensure flex for centering header content */
            align-items: center;
        }

        .bottom-sheet.email-sheet .sheet-body {
            min-height: auto;
            padding: 16px;
            overflow-y: hidden;
        }

        .bottom-sheet.email-sheet .sheet-footer {
            border-radius: 0 0 8px 8px;
            border-top: 1px solid #e8e8e9;
            padding: 16px;
        }

        .bottom-sheet.email-sheet .sheet-title {
            text-align: left;
            font-size: 16px;
            font-weight: 700;
            flex-grow: 1;
        }

        .bottom-sheet.email-sheet .btn-close {
            position: static;
            transform: none;
            right: auto;
            top: auto;
            width: 24px;
            height: 24px;
            margin-left: 16px;
            /* Space from title */
        }

        /* Toast Message */
        #toast-message {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 12px 20px;
            position: fixed;
            z-index: 10000;
            left: 50%;
            bottom: 88px;
            /* Above the sticky footer */
            transform: translateX(-50%);
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
        }

        #toast-message.show {
            visibility: visible;
            opacity: 1;
        }

        /* Generic Bottom Sheet (for setup) */
        .bottom-sheet-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: flex-end;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.2s ease-out;
        }

        .bottom-sheet-overlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }

            to {
                transform: translateY(0);
            }
        }

        .bottom-sheet {
            width: 100%;
            max-width: 480px;
            background: white;
            border-top: 1px solid #d7d7d7;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            position: relative;
            animation: slideUp 0.3s ease-out;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>

<body>
    <div class="mobile-wrap">

        <header class="app-header-sub">
            <div class="header-left">
                <button type="button" class="header-btn" onclick="history.back();">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        id="icon-chevron-left">
                        <path d="M15 6l-6 6l6 6" />
                    </svg>
                </button>
            </div>
            <h1 class="header-title">저장 견적</h1>
            <div class="header-right">
                <button type="button" class="btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" id="icon-search">
                        <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
                        <path d="M21 21l-6 -6" />
                    </svg>
                </button>
                <button type="button" class="btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" id="icon-cart">
                        <path d="M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
                        <path d="M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
                        <path d="M17 17h-11v-14h-2" />
                        <path d="M6 5l14 1l-1 7h-13" />
                    </svg>
                </button>
            </div>
        </header>

        <main>
            <div class="sw-container">

                <section class="filter-chip-section" style="padding-top: 0; padding-bottom: 16px;">
                    <div class="tabs-scroll-wrapper" id="category-chip-group">
                        <div class="multi-chip multi-chip-on" data-category="전체" onclick="toggleCategoryChip(this)">
                            <span class="check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12l5 5l10 -10" />
                                </svg></span>전체
                        </div>
                        <div class="multi-chip multi-chip-off" data-category="명함" onclick="toggleCategoryChip(this)">
                            <span class="check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12l5 5l10 -10" />
                                </svg></span>명함
                        </div>
                        <div class="multi-chip multi-chip-off" data-category="홍보물" onclick="toggleCategoryChip(this)">
                            <span class="check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12l5 5l10 -10" />
                                </svg></span>홍보물
                        </div>
                        <div class="multi-chip multi-chip-off" data-category="패키지/봉투"
                            onclick="toggleCategoryChip(this)">
                            <span class="check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12l5 5l10 -10" />
                                </svg></span>패키지/봉투
                        </div>
                        <div class="multi-chip multi-chip-off" data-category="서식지" onclick="toggleCategoryChip(this)">
                            <span class="check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12l5 5l10 -10" />
                                </svg></span>서식지
                        </div>
                        <div class="multi-chip multi-chip-off" data-category="굿즈" onclick="toggleCategoryChip(this)">
                            <span class="check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12l5 5l10 -10" />
                                </svg></span>굿즈
                        </div>
                        <div class="multi-chip multi-chip-off" data-category="기획제품" onclick="toggleCategoryChip(this)">
                            <span class="check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12l5 5l10 -10" />
                                </svg></span>기획제품
                        </div>
                        <div class="multi-chip multi-chip-off" data-category="별도견적" onclick="toggleCategoryChip(this)">
                            <span class="check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12l5 5l10 -10" />
                                </svg></span>별도견적
                        </div>
                    </div>
                </section>

                <section class="filter-section">
                    <div class="search" data-name="search" id="estimate-search">
                        <input type="text" placeholder="견적명을 입력해주세요" oninput="handleSearchInput(this)">
                        <div class="search-input-right">
                            <div class="search-del" onclick="clearSearch(this)">
                                <img src="assets/images/search-del.png" alt="지우기">
                            </div>
                            <button type="button" class="btn-search" onclick="handleSearch(this)">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 24 24"
                                    id="icon-search">
                                    <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
                                    <path d="M21 21l-6 -6" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </section>

                <section class="transaction-list-section">
                    <div class="transaction-list-header">
                        <div class="header-checkbox-wrapper">
                            <div class="checkbox" id="check-all" onclick="toggleCheckAll(this)">
                                <div class="checkbox-off"></div>
                            </div>
                            <span class="total-count">총 <strong id="transaction-count">10</strong>건</span>
                        </div>

                        <button type="button" class="white-button white-button-sm delete-button"
                            onclick="showDeleteAlert()">선택 삭제</button>
                    </div>

                    <div class="transaction-list" id="transaction-list-container">

                        <article class="common-table-card estimate-card" data-category="책자">
                            <div class="card-header">
                                <div class="checkbox-text" onclick="toggleEstimateCheckbox(this, event)">
                                    <div class="checkbox" data-checked="false">
                                        <div class="checkbox-off"></div>
                                    </div>
                                    <span>[책자] 기업 홍보용 책자</span>
                                </div>
                                <span class="card-date">2026-09-10</span>
                            </div>
                            <div class="card-divider"></div>
                            <div class="estimate-specs-row">
                                용지: (표지) 150g, (내지) 아트지/백색/100g | 인쇄: (표지) CMYK, (내지) 단면CMYK
                            </div>
                            <div class="card-footer">
                                <button type="button" class="delete-button white-button-sm white-button"
                                    onclick="showDeleteAlert(event)">삭제</button>
                                <button type="button" class="white-button white-button-sm"
                                    onclick="showEstimateDetail(this)">상세보기</button>
                            </div>
                        </article>

                        <article class="common-table-card estimate-card" data-category="명함">
                            <div class="card-header">
                                <div class="checkbox-text" onclick="toggleEstimateCheckbox(this, event)">
                                    <div class="checkbox" data-checked="false">
                                        <div class="checkbox-off"></div>
                                    </div>
                                    <span>[일반 명함] 사원용 명함 견적</span>
                                </div>
                                <span class="card-date">2025-09-16</span>
                            </div>
                            <div class="card-divider"></div>
                            <div class="estimate-specs-row">
                                용지: 아트지/150g | 인쇄: 단면CMYK
                            </div>
                            <div class="card-footer">
                                <button type="button" class="delete-button white-button-sm white-button"
                                    onclick="showDeleteAlert(event)">삭제</button>
                                <button type="button" class="white-button white-button-sm"
                                    onclick="showEstimateDetail(this)">상세보기</button>
                            </div>
                        </article>

                        <article class="common-table-card estimate-card" data-category="명함">
                            <div class="card-header">
                                <div class="checkbox-text" onclick="toggleEstimateCheckbox(this, event)">
                                    <div class="checkbox" data-checked="false">
                                        <div class="checkbox-off"></div>
                                    </div>
                                    <span>[일반 명함] 사원용 명함 견적 (재접수 예정)</span>
                                </div>
                                <span class="card-date">2025-08-16</span>
                            </div>
                            <div class="card-divider"></div>
                            <div class="estimate-specs-row">
                                용지: 누브지/220g | 인쇄: 양면CMYK/고급
                            </div>
                            <div class="card-footer">
                                <button type="button" class="delete-button white-button-sm white-button"
                                    onclick="showDeleteAlert(event)">삭제</button>
                                <button type="button" class="white-button white-button-sm"
                                    onclick="showEstimateDetail(this)">상세보기</button>
                            </div>
                        </article>

                        <article class="common-table-card estimate-card" data-category="책자">
                            <div class="card-header">
                                <div class="checkbox-text" onclick="toggleEstimateCheckbox(this, event)">
                                    <div class="checkbox" data-checked="false">
                                        <div class="checkbox-off"></div>
                                    </div>
                                    <span>[책자] 기업 홍보용 책자 (마감 임박)</span>
                                </div>
                                <span class="card-date">2025-08-16</span>
                            </div>
                            <div class="card-divider"></div>
                            <div class="estimate-specs-row">
                                용지: (표지) 스노우지 150g, (내지) 모조지 100g
                            </div>
                            <div class="card-footer">
                                <button type="button" class="delete-button white-button-sm white-button"
                                    onclick="showDeleteAlert(event)">삭제</button>
                                <button type="button" class="white-button white-button-sm"
                                    onclick="showEstimateDetail(this)">상세보기</button>
                            </div>
                        </article>

                    </div>

                    <div class="no-transactions" style="display: none;">저장된 견적서가 없습니다.</div>

                    <div style="margin-bottom: 24px;">
                        <button type="button" class="white-button" style="width: 100%;" onclick="alert('더보기 동작')">더보기
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round"
                                class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-down">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M6 9l6 6l6 -6" />
                            </svg>
                        </button>
                    </div>
                </section>

                <section class="info-section">
                    <div class="title">유의사항</div>
                    <p class="disclaimer">* 저장된 견적서는 작성일로부터 7일이 지나면 자동으로 삭제돼요</p>
                    <p class="disclaimer">* 견적서는 참고용이에요. 증빙이 필요하면 결제 후 마이페이지 > 출고/배송 내역에서 거래명세서를 발급해 주세요</p>
                </section>

            </div>
        </main>

        <div class="sticky-action-footer" id="estimate-action-footer">
            <div class="left-info">
                <span class="total-count" id="selected-count">총 0건</span>
            </div>
            <div class="action-buttons">
                <button class="white-button" id="btn-compare" onclick="showEstimateCompareModal()" disabled>견적
                    비교</button>
                <button class="dark-button" id="btn-issue" onclick="showEstimateIssueModal()">견적서 발급</button>
            </div>
        </div>

        <div id="toast-message"></div>

    </div>

    <div class="modal-overlay" id="estimate-detail-modal-overlay">
        <div class="modal-content full-page-modal" id="estimate-detail-modal">
            <div class="modal-header">
                <button class="header-share-btn" onclick="showToast('공유 링크 복사 완료, 복사된 링크로 견적서를 공유해보세요')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        stroke-width="2.5" stroke="currentColor" fill="none" stroke-linecap="round"
                        stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-share">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path d="M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                        <path d="M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                        <path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                        <path d="M8.7 10.7l6.6 -3.4" />
                        <path d="M8.7 13.3l6.6 3.4" />
                    </svg>
                </button>
                <h2 class="modal-title">견적서 상세</h2>
                <button class="btn-modal-close" onclick="closeModal('estimate-detail-modal-overlay')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M18 6l-12 12" />
                        <path d="M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="action-buttons-top">
                    <button class="dark-button" style="flex: 1;">현재 옵션으로 접수</button>
                </div>

                <div class="form-group" style="margin-bottom: 12px;">
                    <label style="margin-bottom: 8px;">견적명</label>
                    <div class="input-group">
                        <div class="input">
                            <input type="text" value="기업 홍보용 책자" placeholder="견적명을 입력해주세요">
                        </div>
                        <button class="white-button" onclick="alert('견적명이 변경되었습니다.')">변경</button>
                    </div>
                </div>

                <div class="form-group form-group-recipient">
                    <label style="margin-bottom: 8px;">수신인</label>
                    <div class="recipient-input-group">
                        <div class="input">
                            <input type="text" value="김성수" placeholder="수신인 이름을 입력해주세요">
                        </div>
                        <span class="suffix">귀하</span>
                    </div>
                </div>

                <div class="detail-box">
                    <div class="detail-row"><span class="detail-label">견적일</span><span class="detail-value">2025년 09월
                            16일</span></div>
                </div>

                <h3 class="modal-section-title">공급자 정보</h3>
                <table class="history-table" style="width: 100%;">
                    <tbody>
                        <tr>
                            <th>상호명</th>
                            <td class="text-left">(주)성원애드피아</td>
                        </tr>
                        <tr>
                            <th>대표자명</th>
                            <td class="text-left">정대원 <img src="assets/images/stamp.png" alt=""
                                    style="display: inline-block; vertical-align: middle; width: 20px;"></td>
                        </tr>
                        <tr>
                            <th>사업자등록번호</th>
                            <td class="text-left">201-85-22977</td>
                        </tr>
                        <tr>
                            <th>주소</th>
                            <td class="text-left">성수시 성동구 성수일로 80</td>
                        </tr>
                        <tr>
                            <th>연락처</th>
                            <td class="text-left">1599-5555</td>
                        </tr>
                        <tr>
                            <th>팩스</th>
                            <td class="text-left">02-2266-0100</td>
                        </tr>
                    </tbody>
                </table>
                <h3 class="modal-section-title">제품 상세</h3>
                <table class="history-table">
                    <tbody>
                        <tr>
                            <th>품명</th>
                            <td>디지털책자</td>
                        </tr>
                        <tr>
                            <th>용지</th>
                            <td>표지: 아트지/백색/160g<br>내지: 아트지/백색/160g</td>
                        </tr>
                        <tr>
                            <th>인쇄</th>
                            <td>내지: 양면/CMYK/일반<br>표지: 양면/CMYK/금색/일반</td>
                        </tr>
                        <tr>
                            <th>제본</th>
                            <td>왼쪽/중철</td>
                        </tr>
                        <tr>
                            <th>규격/수량</th>
                            <td>210x297(mm) / 200부 / 1건</td>
                        </tr>
                        <tr>
                            <th>가공</th>
                            <td>도무송(전체/라운드), 박(전면 금박)</td>
                        </tr>
                    </tbody>
                </table>

                <div class="detail-box">
                    <div class="detail-row"><span class="detail-label">제품금액</span><span class="detail-value">143,900
                            원</span></div>
                    <div class="detail-row"><span class="detail-label">가공비</span><span class="detail-value">20,000
                            원</span></div>
                    <div class="detail-row"><span class="detail-label">부가세</span><span class="detail-value">14,390
                            원</span></div>
                    <div class="price-row total"
                        style="border-top: 1px solid #e0e0e0; padding-top: 8px; margin-top: 8px;">
                        <span class="detail-label">총 합계 금액</span><span class="detail-value" style="color: #000;">154,240
                            원</span>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label>비고</label>
                    <div class="input"><textarea placeholder="비고 내용을 입력해주세요 (최대 100자)" rows="2"></textarea></div>
                </div>

                <p class="disclaimer">* 본 견적은 견적일로부터 15일간 유효합니다.</p>
                <p class="disclaimer">* 본 견적은 사양과 작업의 난이도에 따라 가격이 변동될 수 있음을 안내 드립니다.</p>
            </div>
            <div class="modal-footer">
                <button class="btn white-button" onclick="openEmailSheet('detail')">이메일 발송</button>
                <button class="btn primary-button" onclick="alert('PDF 다운로드 시작 (상세 모달)')">PDF 다운로드</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="estimate-issue-single-modal-overlay">
        <div class="modal-content full-page-modal" id="estimate-issue-single-modal">
            <div class="modal-header">
                <button class="header-share-btn" onclick="showToast('공유 링크 복사 완료, 복사된 링크로 견적서를 공유해보세요')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        stroke-width="2.5" stroke="currentColor" fill="none" stroke-linecap="round"
                        stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-share">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path d="M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                        <path d="M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                        <path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                        <path d="M8.7 10.7l6.6 -3.4" />
                        <path d="M8.7 13.3l6.6 3.4" />
                    </svg>
                </button>
                <h2 class="modal-title">견적서 발급</h2>
                <button class="btn-modal-close" onclick="closeModal('estimate-issue-single-modal-overlay')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M18 6l-12 12" />
                        <path d="M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="detail-box">
                    <div class="detail-row"><span class="detail-label">견적일</span><span class="detail-value">2025년 09월
                            16일</span></div>
                </div>

                <div class="form-group" style="margin-bottom: 16px;">
                    <label>수신인</label>
                    <div class="recipient-input-group">
                        <div class="input">
                            <input type="text" value="김성수" placeholder="수신인 이름을 입력해주세요">
                        </div>
                        <span class="suffix">귀하</span>
                    </div>
                </div>
                <h3 class="modal-section-title">공급자 정보</h3>
                <table class="history-table" style="width: 100%;">
                    <tbody>
                        <tr>
                            <th>상호명</th>
                            <td class="text-left">(주)성원애드피아</td>
                        </tr>
                        <tr>
                            <th>대표자명</th>
                            <td class="text-left">정대원 <img src="assets/images/stamp.png" alt=""
                                    style="display: inline-block; vertical-align: middle; width: 20px;"></td>
                        </tr>
                        <tr>
                            <th>사업자등록번호</th>
                            <td class="text-left">201-85-22977</td>
                        </tr>
                        <tr>
                            <th>주소</th>
                            <td class="text-left">성수시 성동구 성수일로 80</td>
                        </tr>
                        <tr>
                            <th>연락처</th>
                            <td class="text-left">1599-5555</td>
                        </tr>
                        <tr>
                            <th>팩스</th>
                            <td class="text-left">02-2266-0100</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="modal-section-title">제품 상세</h3>
                <table class="history-table">
                    <tbody>
                        <tr>
                            <th>품명</th>
                            <td>디지털책자</td>
                        </tr>
                        <tr>
                            <th>용지</th>
                            <td>표지: 아트지/백색/160g<br>내지: 아트지/백색/160g</td>
                        </tr>
                        <tr>
                            <th>인쇄</th>
                            <td>내지: 양면/CMYK/일반<br>표지: 양면/CMYK/금색/일반</td>
                        </tr>
                        <tr>
                            <th>제본</th>
                            <td>왼쪽/중철</td>
                        </tr>
                        <tr>
                            <th>규격/수량</th>
                            <td>210x297(mm) / 200부 / 1건</td>
                        </tr>
                        <tr>
                            <th>가공</th>
                            <td>도무송(전체/라운드), 박(전면 금박)</td>
                        </tr>
                    </tbody>
                </table>

                <div class="detail-box">
                    <div class="detail-row"><span class="detail-label">제품금액</span><span class="detail-value">143,900
                            원</span></div>
                    <div class="detail-row"><span class="detail-label">가공비</span><span class="detail-value">20,000
                            원</span></div>
                    <div class="detail-row"><span class="detail-label">부가세</span><span class="detail-value">14,390
                            원</span></div>
                    <div class="price-row total"
                        style="border-top: 1px solid #e0e0e0; padding-top: 8px; margin-top: 8px;">
                        <span class="detail-label">총 합계 금액</span><span class="detail-value" style="color: #000;">154,240
                            원</span>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label>비고</label>
                    <div class="input"><textarea placeholder="비고 내용을 입력해주세요 (최대 100자)" rows="2"></textarea></div>
                </div>

                <p class="disclaimer">* 본 견적은 견적일로부터 15일간 유효합니다.</p>
                <p class="disclaimer">* 본 견적은 사양과 작업의 난이도에 따라 가격이 변동될 수 있음을 안내 드립니다.</p>
            </div>
            <div class="modal-footer">
                <button class="btn white-button" onclick="openEmailSheet('issue-single')">이메일 발송</button>
                <button class="btn primary-button" onclick="alert('PDF 다운로드 시작 (발급 단일 모달)')">PDF 다운로드</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="estimate-issue-multi-modal-overlay">
        <div class="modal-content full-page-modal" id="estimate-issue-multi-modal">
            <div class="modal-header">
                <button class="header-share-btn" onclick="showToast('공유 링크 복사 완료, 복사된 링크로 견적서를 공유해보세요')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        stroke-width="2.5" stroke="currentColor" fill="none" stroke-linecap="round"
                        stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-share">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path d="M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                        <path d="M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                        <path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                        <path d="M8.7 10.7l6.6 -3.4" />
                        <path d="M8.7 13.3l6.6 3.4" />
                    </svg>
                </button>
                <h2 class="modal-title">견적서 발급</h2>
                <button class="btn-modal-close" onclick="closeModal('estimate-issue-multi-modal-overlay')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M18 6l-12 12" />
                        <path d="M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="detail-box">
                    <div class="detail-row"><span class="detail-label">견적일</span><span class="detail-value">2025년 09월
                            16일</span></div>
                </div>

                <div class="form-group" style="margin-bottom: 16px;">
                    <label>수신인</label>
                    <div class="recipient-input-group">
                        <div class="input">
                            <input type="text" value="김성수" placeholder="수신인 이름을 입력해주세요">
                        </div>
                        <span class="suffix">귀하</span>
                    </div>
                </div>
                <h3 class="modal-section-title">공급자 정보</h3>
                <table class="history-table" style="width: 100%;">
                    <tbody>
                        <tr>
                            <th>상호명</th>
                            <td class="text-left">(주)성원애드피아</td>
                        </tr>
                        <tr>
                            <th>대표자명</th>
                            <td class="text-left">정대원 <img src="assets/images/stamp.png" alt=""
                                    style="display: inline-block; vertical-align: middle; width: 20px;"></td>
                        </tr>
                        <tr>
                            <th>사업자등록번호</th>
                            <td class="text-left">201-85-22977</td>
                        </tr>
                        <tr>
                            <th>주소</th>
                            <td class="text-left">성수시 성동구 성수일로 80</td>
                        </tr>
                        <tr>
                            <th>연락처</th>
                            <td class="text-left">1599-5555</td>
                        </tr>
                        <tr>
                            <th>팩스</th>
                            <td class="text-left">02-2266-0100</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="modal-section-title">견적 상세</h3>
                <table class="history-table">
                    <tbody>
                        <tr>
                            <td class="text-left"><strong>일반 명함</strong><br><span
                                    style="font-size: 12px; color: #888;">스노우지 150g / 양면 CMYK</span></td>
                            <td>500매<br>2건</td>
                            <td>9,240</td>
                        </tr>
                        <tr>
                            <td class="text-left"><strong>책자</strong><br><span style="font-size: 12px; color: #888;">표지
                                    스노우지 150g / 중철</span></td>
                            <td>200부<br>1건</td>
                            <td>145,000</td>
                        </tr>
                    </tbody>
                </table>

                <div class="detail-box">
                    <div class="detail-row"><span class="detail-label">제품금액</span><span class="detail-value">143,900
                            원</span></div>
                    <div class="detail-row"><span class="detail-label">가공비</span><span class="detail-value">20,000
                            원</span></div>
                    <div class="detail-row"><span class="detail-label">부가세</span><span class="detail-value">14,390
                            원</span></div>
                    <div class="price-row total"
                        style="border-top: 1px solid #e0e0e0; padding-top: 8px; margin-top: 8px;">
                        <span class="detail-label">총 합계 금액</span><span class="detail-value" style="color: #000;">154,240
                            원</span>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label>비고</label>
                    <div class="input"><textarea placeholder="비고 내용을 입력해주세요 (최대 100자)" rows="2"></textarea></div>
                </div>

                <p class="disclaimer">* 본 견적은 견적일로부터 15일간 유효합니다.</p>
                <p class="disclaimer">* 본 견적은 사양과 작업의 난이도에 따라 가격이 변동될 수 있음을 안내 드립니다.</p>
            </div>
            <div class="modal-footer">
                <button class="btn white-button" onclick="openEmailSheet('issue-multi')">이메일 발송</button>
                <button class="btn primary-button" onclick="alert('PDF 다운로드 시작 (발급 다중 모달)')">PDF 다운로드</button>
            </div>
        </div>
    </div>

    <div class="bottom-sheet-overlay email-sheet" id="email-sheet-overlay">
        <div class="bottom-sheet email-sheet" id="email-sheet">
            <div class="sheet-header">
                <div class="sheet-title">이메일 발송</div>
                <button class="btn-close" onclick="closeEmailSheet()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M18 6l-12 12" />
                        <path d="M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="sheet-body">
                <div class="form-group" style="margin-bottom: 20px;">
                    <label for="recipient-email">받는 사람 이메일 주소</label>
                    <div class="input-group">
                        <div class="input">
                            <input type="email" id="recipient-email" placeholder="이메일 주소를 입력해주세요"
                                value="hong.gildong@email.com">
                        </div>
                        <button class="dark-button white-button-sm" onclick="alert('주소록 열기 (구현 필요)')"
                            style="height: 40px;">주소록</button>
                    </div>
                </div>
            </div>
            <div class="sheet-footer">
                <button class="btn white-button" onclick="closeEmailSheet()">취소</button>
                <button class="btn dark-button" onclick="sendEmail()">발송하기</button>
            </div>
        </div>
    </div>


    <div class="modal-overlay" id="delete-alert-overlay">
        <div class="alert-modal">
            <div class="modal-title">견적 삭제</div>
            <div class="modal-message">선택한 견적을 삭제하시겠습니까?<br>삭제 후에는 복구할 수 없습니다.</div>
            <div class="modal-buttons">
                <button class="modal-button modal-button-secondary"
                    onclick="closeModal('delete-alert-overlay')">취소</button>
                <button class="modal-button modal-button-primary" onclick="deleteEstimate()">삭제하기</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="limit-alert-overlay">
        <div class="alert-modal">
            <div class="modal-title">견적 비교 안내</div>
            <div class="modal-message">견적서는 최대 3개까지 비교할 수 있어요<br>3개 이하의 견적서를 선택해주세요</div>
            <div class="modal-buttons"><button class="modal-button modal-button-confirm"
                    onclick="closeModal('limit-alert-overlay')">확인</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="estimate-compare-2-modal-overlay">
        <div class="modal-content full-page-modal" id="estimate-compare-2-modal">
            <div class="modal-header">
                <h2 class="modal-title">견적 비교 (2개)</h2>
                <button class="btn-modal-close" onclick="closeModal('estimate-compare-2-modal-overlay')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M18 6l-12 12" />
                        <path d="M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="modal-body" style="padding: 16px;">
                <div class="comparison-cards-container">

                    <div class="comparison-card">
                        <div class="card-title-compare">고객사용 책자</div>
                        <div class="spec-group"><span class="spec-label">품명</span><span class="spec-value">책자</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">용지</span><span class="spec-value">표지:
                                아트지/백색/160g<br>내지: 아트지/백색/160g/32p</span></div>
                        <div class="spec-group"><span class="spec-label">인쇄</span><span class="spec-value">표지:
                                양면/CMYK/금색/일반<br>내지: 양면/CMYK/은색/일반</span></div>
                        <div class="spec-group"><span class="spec-label">제본</span><span class="spec-value">왼쪽/중철</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">규격/수량</span><span class="spec-value">210x297mm
                                10부</span></div>
                        <div class="spec-group"><span class="spec-label">박</span><span class="spec-value">옵션1:
                                전면/금박(유광)<br>옵션2: 후면/금박(유광)</span></div>
                        <div class="spec-group"><span class="spec-label">코팅</span><span class="spec-value">표지:
                                단면/유광써멀</span></div>
                        <div class="spec-group"><span class="spec-label">도무송</span><span class="spec-value">전체/라운드, 사각,
                                원</span></div>
                        <div class="spec-group"><span class="spec-label">제품 금액</span><span
                                class="spec-value">₩181,600</span></div>
                        <div class="spec-group"><span class="spec-label">가공비</span><span
                                class="spec-value">₩20,000</span></div>
                        <div class="spec-group"><span class="spec-label">부가세</span><span
                                class="spec-value">₩18,160</span></div>
                        <div class="spec-group" style="border-bottom: none;"><span class="spec-label">총 합계</span><span
                                class="spec-value total">₩199,760</span></div>
                    </div>

                    <div class="comparison-card">
                        <div class="card-title-compare">기업 홍보용 책자</div>
                        <div class="spec-group"><span class="spec-label">품명</span><span class="spec-value">초저가 책자</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">용지</span><span class="spec-value">표지:
                                아트지/백색/250g<br>내지: 모조지/백색/100g/32p</span></div>
                        <div class="spec-group"><span class="spec-label">인쇄</span><span class="spec-value">표지:
                                양면/CMYK/디지털<br>내지: 양면/CMYK/디지털 롤</span></div>
                        <div class="spec-group"><span class="spec-label">제본</span><span class="spec-value">왼쪽/무선</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">규격/수량</span><span class="spec-value">210x297mm
                                10부</span></div>
                        <div class="spec-group"><span class="spec-label">박</span><span class="spec-value">-</span></div>
                        <div class="spec-group"><span class="spec-label">코팅</span><span class="spec-value">-</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">도무송</span><span class="spec-value">-</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">제품 금액</span><span
                                class="spec-value">₩37,100</span></div>
                        <div class="spec-group"><span class="spec-label">가공비</span><span class="spec-value">₩0</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">부가세</span><span
                                class="spec-value">₩3,710</span></div>
                        <div class="spec-group" style="border-bottom: none;"><span class="spec-label">총 합계</span><span
                                class="spec-value total">₩40,810</span></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn white-button">인쇄하기</button>
                <button class="btn white-button">PDF 다운로드</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="estimate-compare-3-modal-overlay">
        <div class="modal-content full-page-modal" id="estimate-compare-3-modal">
            <div class="modal-header">
                <h2 class="modal-title">견적 비교 (3개)</h2>
                <button class="btn-modal-close" onclick="closeModal('estimate-compare-3-modal-overlay')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M18 6l-12 12" />
                        <path d="M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="modal-body" style="padding: 16px;">
                <div class="comparison-cards-container">

                    <div class="comparison-card">
                        <div class="card-title-compare">고객사용 책자</div>
                        <div class="spec-group"><span class="spec-label">품명</span><span class="spec-value">책자</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">용지</span><span class="spec-value">표지:
                                아트지/백색/160g<br>내지: 아트지/백색/160g/32p</span></div>
                        <div class="spec-group"><span class="spec-label">인쇄</span><span class="spec-value">표지:
                                양면/CMYK/금색/일반<br>내지: 양면/CMYK/은색/일반</span></div>
                        <div class="spec-group"><span class="spec-label">제본</span><span class="spec-value">왼쪽/중철</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">규격/수량</span><span class="spec-value">210x297mm
                                10부</span></div>
                        <div class="spec-group"><span class="spec-label">박</span><span class="spec-value">옵션1:
                                전면/금박(유광)<br>옵션2: 후면/금박(유광)</span></div>
                        <div class="spec-group"><span class="spec-label">코팅</span><span class="spec-value">표지:
                                단면/유광써멀</span></div>
                        <div class="spec-group"><span class="spec-label">도무송</span><span class="spec-value">전체/라운드, 사각,
                                원</span></div>
                        <div class="spec-group"><span class="spec-label">제품 금액</span><span
                                class="spec-value">₩181,600</span></div>
                        <div class="spec-group"><span class="spec-label">가공비</span><span
                                class="spec-value">₩20,000</span></div>
                        <div class="spec-group"><span class="spec-label">부가세</span><span
                                class="spec-value">₩18,160</span></div>
                        <div class="spec-group" style="border-bottom: none;"><span class="spec-label">총 합계</span><span
                                class="spec-value total">₩199,760</span></div>
                    </div>

                    <div class="comparison-card">
                        <div class="card-title-compare">기업 홍보용 책자</div>
                        <div class="spec-group"><span class="spec-label">품명</span><span class="spec-value">초저가 책자</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">용지</span><span class="spec-value">표지:
                                아트지/백색/250g<br>내지: 모조지/백색/100g/32p</span></div>
                        <div class="spec-group"><span class="spec-label">인쇄</span><span class="spec-value">표지:
                                양면/CMYK/디지털<br>내지: 양면/CMYK/디지털 롤</span></div>
                        <div class="spec-group"><span class="spec-label">제본</span><span class="spec-value">왼쪽/무선</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">규격/수량</span><span class="spec-value">210x297mm
                                10부</span></div>
                        <div class="spec-group"><span class="spec-label">박</span><span class="spec-value">-</span></div>
                        <div class="spec-group"><span class="spec-label">코팅</span><span class="spec-value">-</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">도무송</span><span class="spec-value">-</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">제품 금액</span><span
                                class="spec-value">₩37,100</span></div>
                        <div class="spec-group"><span class="spec-label">가공비</span><span class="spec-value">₩0</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">부가세</span><span
                                class="spec-value">₩3,710</span></div>
                        <div class="spec-group" style="border-bottom: none;"><span class="spec-label">총 합계</span><span
                                class="spec-value total">₩40,810</span></div>
                    </div>

                    <div class="comparison-card">
                        <div class="card-title-compare">기업 홍보용 팜플렛</div>
                        <div class="spec-group"><span class="spec-label">품명</span><span class="spec-value">팜플렛</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">용지</span><span
                                class="spec-value">아트지/백색/150g</span></div>
                        <div class="spec-group"><span class="spec-label">인쇄</span><span
                                class="spec-value">양면/CMYK/오렌지(전면)/그린(후면)</span></div>
                        <div class="spec-group"><span class="spec-label">제본</span><span class="spec-value">-</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">규격/수량</span><span
                                class="spec-value">420x297(mm) 10매 1건</span></div>
                        <div class="spec-group"><span class="spec-label">박</span><span class="spec-value">-</span></div>
                        <div class="spec-group"><span class="spec-label">코팅</span><span class="spec-value">-</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">도무송</span><span class="spec-value">-</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">제품 금액</span><span
                                class="spec-value">₩25,000</span></div>
                        <div class="spec-group"><span class="spec-label">가공비</span><span class="spec-value">₩0</span>
                        </div>
                        <div class="spec-group"><span class="spec-label">부가세</span><span
                                class="spec-value">₩2,500</span></div>
                        <div class="spec-group" style="border-bottom: none;"><span class="spec-label">총 합계</span><span
                                class="spec-value total">₩27,500</span></div>
                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button class="btn white-button">인쇄하기</button>
                <button class="btn white-button">PDF 다운로드</button>
            </div>
        </div>
    </div>

    <script>
        // --- Search ---
        function handleSearchInput(input) {
            const searchBox = input.closest('.search');
            searchBox.classList.toggle('has-text', input.value.trim() !== '');
        }
        function clearSearch(btn) {
            const searchBox = btn.closest('.search');
            const input = searchBox.querySelector('input');
            input.value = '';
            searchBox.classList.remove('has-text');
            input.focus();
            filterEstimateList();
        }
        function handleSearch(btn) { console.log('Search submitted:', btn.closest('.search').querySelector('input').value); filterEstimateList(); }

        // --- Filter Chips ---
        function toggleMultiChip(chip, forceState) {
            const isCurrentlyOn = chip.classList.contains('multi-chip-on');
            let turnOn = (forceState === undefined) ? !isCurrentlyOn : forceState;

            if (turnOn) {
                chip.classList.remove('multi-chip-off');
                chip.classList.add('multi-chip-on');
            } else {
                chip.classList.remove('multi-chip-on');
                chip.classList.add('multi-chip-off');
            }
        }

        function toggleCategoryChip(chip) {
            const category = chip.getAttribute('data-category');
            const group = chip.closest('#category-chip-group');
            const allChip = group.querySelector('[data-category="전체"]');

            if (category === '전체') {
                const isTurningOn = !allChip.classList.contains('multi-chip-on');
                toggleMultiChip(allChip, isTurningOn);
                group.querySelectorAll('.multi-chip').forEach(c => {
                    if (c !== allChip) toggleMultiChip(c, false);
                });
            } else {
                toggleMultiChip(chip);
                toggleMultiChip(allChip, false);
                const anyOtherOn = Array.from(group.querySelectorAll('.multi-chip:not([data-category="전체"])')).some(c => c.classList.contains('multi-chip-on'));
                if (!anyOtherOn) {
                    toggleMultiChip(allChip, true);
                }
            }
            filterEstimateList();
        }

        // --- Pagination (Placeholder) ---
        function updatePagination() { /* ... */ }

        // --- Checkbox Logic ---
        function toggleCheckbox(checkbox) {
            const isChecked = checkbox.dataset.checked === 'true';
            checkbox.dataset.checked = !isChecked;
            // Using placeholder image paths as they weren't provided in the HTML file
            const checkedImg = 'assets/images/checked.svg'; // Placeholder check image
            checkbox.innerHTML = !isChecked ? `<div class="checkbox-on"><img src="${checkedImg}" alt="체크"></div>` : '<div class="checkbox-off"></div>';
        }

        function toggleCheckAll(master) {
            const isChecked = master.dataset.checked === 'true';
            const newState = !isChecked;
            master.dataset.checked = newState;
            const checkedImg = 'assets/images/checked.svg';
            master.innerHTML = newState ? `<div class="checkbox-on"><img src="${checkedImg}" alt="체크"></div>` : '<div class="checkbox-off"></div>';
            document.querySelectorAll('.transaction-list .checkbox').forEach(cb => {
                cb.dataset.checked = newState;
                cb.innerHTML = newState ? `<div class="checkbox-on"><img src="${checkedImg}" alt="체크"></div>` : '<div class="checkbox-off"></div>';
            });
            updateStickyFooter();
        }

        function toggleEstimateCheckbox(wrapper, event) {
            event.stopPropagation();
            const checkbox = wrapper.querySelector('.checkbox');
            if (checkbox.dataset.checked !== 'true') {
                const count = document.querySelectorAll('.transaction-list .checkbox[data-checked="true"]').length;
                if (count >= 3) { openModal('limit-alert-overlay'); return; }
            }
            toggleCheckbox(checkbox);

            // Sync Master
            const all = document.querySelectorAll('.transaction-list .checkbox').length;
            const checked = document.querySelectorAll('.transaction-list .checkbox[data-checked="true"]').length;
            const master = document.getElementById('check-all');
            const allChecked = all > 0 && all === checked;
            master.dataset.checked = allChecked;
            const checkedImg = 'assets/images/checked.svg';
            master.innerHTML = allChecked ? `<div class="checkbox-on"><img src="${checkedImg}" alt="체크"></div>` : '<div class="checkbox-off"></div>';

            updateStickyFooter();
        }

        function updateStickyFooter() {
            const checked = document.querySelectorAll('.transaction-list .checkbox[data-checked="true"]').length;
            const footer = document.getElementById('estimate-action-footer');
            const compareBtn = document.getElementById('btn-compare');
            // Issue button is always visible in this logic when footer is active

            if (checked > 0) {
                footer.classList.add('active');
                document.getElementById('selected-count').textContent = `총 ${checked}건`;
                document.querySelector('.mobile-wrap').style.paddingBottom = '88px';

                // [MODIFIED] Button Logic for Compare
                // Default: Disabled. Active if >= 2.
                // Keeping existing constraint of max 3 for valid comparison
                if (checked >= 2 && checked <= 3) {
                    compareBtn.disabled = false;
                } else {
                    compareBtn.disabled = true;
                }
            } else {
                footer.classList.remove('active');
                document.querySelector('.mobile-wrap').style.paddingBottom = '20px';
                // Reset to default disabled
                compareBtn.disabled = true;
            }
        }

        // --- Filter List ---
        function filterEstimateList() { /* (Same as previous) */ }

        // --- Modals ---
        function openModal(id) { document.getElementById(id)?.classList.add('active'); document.body.style.overflow = 'hidden'; }
        function closeModal(id) { document.getElementById(id)?.classList.remove('active'); document.body.style.overflow = ''; }

        // --- Triggers ---
        function showEstimateDetail(btn) { openModal('estimate-detail-modal-overlay'); }

        function showEstimateIssueModal() {
            const checkedCount = document.querySelectorAll('.transaction-list .checkbox[data-checked="true"]').length;
            if (checkedCount === 1) {
                openModal('estimate-issue-single-modal-overlay');
            } else if (checkedCount > 1) {
                openModal('estimate-issue-multi-modal-overlay');
            } else {
                alert("선택된 견적이 없습니다.");
            }
        }

        function showDeleteAlert(e) { if (e) e.stopPropagation(); openModal('delete-alert-overlay'); }
        function deleteEstimate() { alert('삭제되었습니다.'); closeModal('delete-alert-overlay'); }

        // --- [NEW] Compare Modal Logic ---
        function showEstimateCompareModal() {
            const checkedCount = document.querySelectorAll('.transaction-list .checkbox[data-checked="true"]').length;
            if (checkedCount === 2) {
                openModal('estimate-compare-2-modal-overlay');
            } else if (checkedCount === 3) {
                openModal('estimate-compare-3-modal-overlay');
            } else {
                // This case should not be reached due to sticky footer logic, but is a safe fallback
                openModal('limit-alert-overlay');
            }
        }

        // --- [NEW] Toast Logic ---
        function showToast(message) {
            const toast = document.getElementById("toast-message");
            toast.textContent = message;
            toast.classList.add("show");
            setTimeout(function () {
                toast.classList.remove("show");
            }, 3000);
        }

        // --- [MODIFIED] Email Bottom Sheet Logic ---

        let currentModalContext = ''; // 'detail', 'issue-single', 'issue-multi'
        let emailSheetHandler = {};

        function setupEmailSheet() {
            const overlay = document.getElementById('email-sheet-overlay');
            const sheet = document.getElementById('email-sheet');
            if (!overlay || !sheet) return;

            emailSheetHandler.openSheet = (context) => {
                currentModalContext = context;
                overlay.classList.add('active');
                sheet.classList.remove('closing');
                document.body.style.overflow = 'hidden';
                // Set default values here
                document.getElementById('recipient-email').value = 'hong.gildong@email.com';
            };

            emailSheetHandler.closeSheet = () => {
                sheet.classList.add('closing');
                const anyModalActive = document.querySelector('.modal-overlay.active');
                if (!anyModalActive) {
                    document.body.style.overflow = '';
                }
                setTimeout(() => { overlay.classList.remove('active'); sheet.classList.remove('closing'); }, 300);
            };

            // Add click-to-close listener for the overlay
            overlay.addEventListener('click', (e) => {
                if (e.target.id === 'email-sheet-overlay') emailSheetHandler.closeSheet();
            });
        }


        function openEmailSheet(context) {
            emailSheetHandler.openSheet(context);
        }

        function closeEmailSheet() {
            emailSheetHandler.closeSheet();
        }

        function sendEmail() {
            const email = document.getElementById('recipient-email').value;

            if (!email || !email.includes('@')) {
                alert("유효한 이메일 주소를 입력해주세요.");
                return;
            }

            // 실제 발송 로직 (placeholder)
            alert(`[${currentModalContext}] 이메일 발송 요청:\n받는 사람: ${email}\n(구현 필요)`);
            closeEmailSheet();
        }


        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            setupEmailSheet(); // [MODIFIED] Email Sheet 초기화
            updatePagination();
            updateStickyFooter();
            // Close modal on overlay click
            document.querySelectorAll('.modal-overlay').forEach(o => o.addEventListener('click', e => {
                if (e.target.id === o.id) closeModal(o.id);
            }));
        });
    </script>
</body>

</html>