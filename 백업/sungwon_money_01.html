<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>성원머니 메인 (v17: 페이지네이션 아이콘 수정)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* [v12] Master Guide CSS */
        /* Reset & Base */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f4f5f7; color: #333; font-size: 16px; line-height: 1.6; overflow-x: visible;
        }
        ul, li { list-style: none; }
        a { text-decoration: none; color: inherit; }
        button { font-family: inherit; border: none; cursor: pointer; background: none; padding: 0; }
        img { max-width: 100%; max-height: 100%; object-fit: contain; display: block; }
        input { font-family: inherit; }
        svg { stroke-width: 2; fill: none; stroke: currentColor; stroke-linecap: round; stroke-linejoin: round; flex-shrink: 0; display: block; }

        /* Layout */
        .mobile-wrap { width: 100%; max-width: 480px; margin: 0 auto; background-color: #ffffff; padding-bottom: 20px; /* Pagination 여백 */ }

        /* Header (v12 Standard) */
        .app-header-sub { height: 56px; background: white; border-bottom: 1px solid #cccccc; display: flex; align-items: center; justify-content: space-between; padding: 0 16px; position: sticky; top: 0; z-index: 100; }
        .header-btn { display: flex; align-items: center; justify-content: center; width: 28px; height: 28px; cursor: pointer; transition: transform 0.2s; color: #333; }
        .header-btn:active { transform: scale(0.9); }
        .header-left { flex: 1 0 0; display: flex; justify-content: flex-start; }
        .header-title { flex: 3 0 0; font-size: 18px; font-weight: 600; text-align: center; color: #212121; }
        .header-right { flex: 1 0 0; display: flex; justify-content: flex-end; gap: 8px; }
        .btn-icon { cursor: pointer; transition: transform 0.2s; display: flex; align-items: center; justify-content: center; flex-shrink: 0; width: 24px; height: 24px; color: #333; }
        .btn-icon:active { transform: scale(0.9); }
        .btn-icon svg { width: 100%; height: 100%; }

        /* Buttons (v12 Standard + Primary) */
        .primary-button { background-color: #4e6ee4; color: white; height: 44px; padding: 7px 19px; border-radius: 6px; border: none; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; justify-content: center; min-width: fit-content; }
        .primary-button:hover { background: #3d5dd3; }
        .primary-button:active { transform: scale(0.98); }
        .dark-button { background: #424242; color: white; height: 44px; padding: 7px 19px; border-radius: 6px; border: none; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; justify-content: center; min-width: fit-content; }
        .dark-button:hover { background: #333; }
        .dark-button:active { transform: scale(0.98); }
        .white-button { background: white; color: #424242; height: 44px; padding: 7px 19px; border-radius: 6px; border: 1px solid #e8e8e9; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; justify-content: center; min-width: fit-content; }
        .white-button:hover { background: #f9f9f9; }
        .white-button:active { transform: scale(0.98); }

        /* Main Content */
        .sw-container { padding: 16px; }

        /* Account Section (v14) */
        .info-section { background: #fff; border: 1px solid #e8e8e9; border-radius: 8px; padding: 16px; margin-bottom: 16px; }
        .info-section .title { font-size: 14px; font-weight: 600; color: #555; margin-bottom: 8px; }
        .info-section .balance-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .info-section .balance { font-size: 24px; font-weight: 700; color: #333; }
        .info-section .balance-row .primary-button { height: 36px; font-size: 13px; }
        .account-info-row { display: flex; align-items: center; justify-content: space-between; padding: 8px 0; cursor: pointer; }
        .account-info-row:hover { background-color: #f8f8f8; }
        .account-info { font-size: 14px; color: #333; word-break: keep-all; flex-grow: 1; margin-right: 8px;}
        .account-info strong { font-weight: 600; }
        .account-chevron { width: 16px; height: 16px; color: #888; flex-shrink: 0; }
        
        /* Status Filter Tabs (v13) */
        .status-tabs { background: #fff; padding: 8px 16px; border-bottom: 1px solid #e9e9e9; margin: 0 -16px 16px -16px; }
        .tabs-scroll-wrapper { overflow-x: auto; white-space: nowrap; -ms-overflow-style: none; scrollbar-width: none; }
        .tabs-scroll-wrapper::-webkit-scrollbar { display: none; }
        .status-tabs ul { display: flex; }
        .status-tabs li { margin-right: 16px; }
        .status-tabs li:last-child { margin-right: 0; }
        .status-tabs li a { display: block; padding: 10px 4px; font-size: 16px; color: #888; border-bottom: 2px solid transparent; white-space: nowrap; }
        .status-tabs li a.active { color: #333; font-weight: 600; border-bottom-color: #333; }

        /* Filter Section (v15) */
        .filter-section { padding: 0 0 16px 0; display: flex; justify-content: flex-start; align-items: center; }
        .text-select-button { display: inline-flex; align-items: center; gap: 4px; cursor: pointer; transition: opacity 0.2s; user-select: none; padding: 8px 0; }
        .text-select-button:hover { opacity: 0.8; }
        .text-select-button:active { transform: scale(0.98); }
        .text-select-button-text { font-size: 14px; color: #2c2c2c; font-weight: 500; white-space: nowrap; }
        .text-select-button-arrow { width: 16px; height: 16px; color: #555; }
        .text-select-button-arrow svg {transition: transform 0.2s;}
        .text-select-button.open .text-select-button-arrow svg {transform: rotate(-180deg);}

        /* Transaction Card (v14) */
        .transaction-list-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 16px; font-size: 14px; color: #555; border-bottom: 1px solid #f0f0f0; margin-bottom: 16px; }
        .transaction-list-header .total-count strong { font-weight: 600; color: #333; }
        .view-count-select { display: inline-flex; align-items: center; gap: 2px; cursor: pointer; transition: opacity 0.2s; user-select: none; }
        .view-count-select:hover { opacity: 0.8; }
        .view-count-select:active { transform: scale(0.98); }
        .view-count-select-text { font-size: 14px; color: #2c2c2c; font-weight: 400; white-space: nowrap; }
        .view-count-select-arrow { width: 12px; height: 12px; }
        .view-count-select-arrow svg {transition: transform 0.2s; transform: translateY(-2px);}
        .transaction-list { display: flex; flex-direction: column; gap: 12px; margin-bottom: 24px; /* Pagination 여백 */ }
        .transaction-card { border: 1px solid #e0e0e0; border-radius: 8px; background: #fff; overflow: hidden; }
        .card-body { padding: 16px; }
        .card-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
        .card-content { font-size: 16px; font-weight: 500; color: #333; margin-right: 16px; }
        .card-amount { font-size: 16px; font-weight: 700; white-space: nowrap; }
        .card-amount.plus { color: #007bff; }
        .card-amount.minus { color: #dc3545; }
        .card-status-fail { font-size: 13px; color: #dc3545; margin-top: 4px; }
        .card-divider { height: 1px; background-color: #f0f0f0; margin: 12px 0; }
        .card-bottom { display: flex; justify-content: space-between; align-items: center; }
        .card-meta { font-size: 13px; color: #666; }
        .card-balance { font-size: 14px; color: #333; text-align: right; }
        .card-balance .label { color: #666; margin-right: 4px; font-size: 13px;}
        .card-balance .value { font-weight: 700; }
        .card-footer { padding: 12px 16px; background-color: #fcfcfc; border-top: 1px solid #f0f0f0; display: flex; justify-content: flex-end; gap: 8px; }
        .card-footer .btn { height: 36px; font-size: 13px; padding: 0 12px; }
        .no-transactions { padding: 40px 16px; text-align: center; color: #888; font-size: 14px; }

        /* [v17] Pagination (Master Guide Img) */
        .pagination { display: flex; align-items: center; justify-content: center; gap: 9px; }
        .pagination-arrow { 
            width: 15px; /* 가이드 기준 크기 조정 */
            height: 15px; 
            cursor: pointer; 
            transition: transform 0.2s; 
            display: flex; align-items: center; justify-content: center; /* 이미지 중앙정렬 */
        }
        .pagination-arrow img { width: 100%; height: auto; } /* 이미지 크기 조정 */
        .pagination-arrow:active { transform: scale(0.9); }
        .pagination-arrow.disabled { opacity: 0.3; cursor: not-allowed; }
        .pagination-numbers { display: flex; gap: 3px; }
        .pagination-number { min-width: 28px; height: 28px; padding: 4px 5px; border-radius: 4px; font-size: 14px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; user-select: none; }
        .pagination-number.active { background: #4e6ee4; color: white; }
        .pagination-number:not(.active) { background: white; color: #bcbcbc; }
        .pagination-number:not(.active):hover { background: #f5f5f5; }
        .pagination-number:active { transform: scale(0.95); }

        /* Bottom Sheet & Filters (v12 Standard) */
        /* ... (Bottom Sheet CSS 생략 - v14와 동일) ... */
        .bottom-sheet-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: flex-end; justify-content: center; z-index: 1000; animation: fadeIn 0.2s ease-out; }
        .bottom-sheet-overlay.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        @keyframes slideDown { from { transform: translateY(0); } to { transform: translateY(100%); } }
        .bottom-sheet { width: 100%; max-width: 480px; background: white; border-top: 1px solid #d7d7d7; border-top-left-radius: 8px; border-top-right-radius: 8px; position: relative; animation: slideUp 0.3s ease-out; max-height: 90vh; display: flex; flex-direction: column; }
        .bottom-sheet.closing { animation: slideDown 0.3s ease-out; }
        .sheet-handle { width: 27px; height: 4px; background: #d9d9d9; border-radius: 100px; margin: 10px auto; cursor: grab; }
        .sheet-handle:active { cursor: grabbing; }
        .sheet-header { height: 21px; padding: 0 20px; display: flex; align-items: center; justify-content: center; position: relative; margin-bottom: 20px; }
        .sheet-title { font-size: 16px; font-weight: 700; color: black; }
        .btn-close { position: absolute; right: 20px; top: 0; width: 21px; height: 21px; cursor: pointer; transition: transform 0.2s; }
        .btn-close:active { transform: scale(0.9); }
        .btn-close svg { width: 100%; height: 100%; color: #333; }
        .sheet-body { flex: 1; overflow-y: auto; padding: 0 20px 20px 20px; }
        .filter-group { margin-bottom: 24px; }
        .filter-group-title { font-size: 14px; font-weight: 600; color: #333; margin-bottom: 12px; }
        .filter-group-content { display: flex; flex-wrap: wrap; gap: 8px; }
        .single-chip { display: inline-flex; align-items: center; justify-content: center; padding: 6px 12px; border-radius: 100px; font-size: 14px; cursor: pointer; transition: all 0.2s; user-select: none; }
        .single-chip-off { background: #f5f5f6; color: #8a8a92; }
        .single-chip-on { background: #4e6ee4; color: white; }
        .single-chip:active { transform: scale(0.95); }
        .sheet-footer { padding: 20px; border-top: 1px solid #f0f0f0; background: #fff; display: flex; gap: 8px; }
        .sheet-footer .btn { flex: 1; height: 44px; padding: 7px 19px; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; justify-content: center; }
        .option-list { list-style: none; padding: 0; margin: 0; }
        .option-list li { border-bottom: 1px solid #f0f0f0; }
        .option-list li:last-child { border-bottom: none; }
        .option-list li a, .option-list li button { display: block; width: 100%; padding: 16px 20px; font-size: 16px; color: #333; text-align: left; background: none; border: none; cursor: pointer; }
        .option-list li a:hover, .option-list li button:hover { background-color: #f8f8f8; }
        #withdrawal-details-sheet .sheet-body { padding: 20px; }
        .detail-item { display: flex; margin-bottom: 12px; font-size: 14px; }
        .detail-item .label { color: #666; width: 80px; flex-shrink: 0; }
        .detail-item .value { color: #333; font-weight: 500; }
        .detail-item .value.fail-reason { color: #dc3545; }

    </style>
</head>
<body>
    <div class="mobile-wrap">
        
        <header class="app-header-sub">
            <div class="header-left">
                <button type="button" class="header-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" id="icon-chevron-left"><path d="M15 6l-6 6l6 6" /></svg>
                </button>
            </div>
            <h1 class="header-title">성원머니</h1>
            <div class="header-right">
                <button type="button" class="btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" id="icon-search"><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>
                </button>
                <button type="button" class="btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" id="icon-cart"><path d="M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M17 17h-11v-14h-2" /><path d="M6 5l14 1l-1 7h-13" /></svg>
                </button>
            </div>
        </header>

        <main class="sw-container">
            <section class="info-section">
                <div class="title">성원머니</div>
                <div class="balance-row">
                    <span class="balance">₩1,370,000</span>
                    <button type="button" class="primary-button">출금</button> 
                </div>
                <div class="title" style="margin-top: 16px;">가상계좌</div>
                <div class="account-info-row" onclick="showAccountOptionsSheet()">
                    <div class="account-info"><strong>우리은행 65459011733483 정혜진</strong></div>
                    <div class="account-chevron">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M9 6l6 6l-6 6" /></svg>
                    </div>
                </div>
            </section>
            
            <section class="info-section">
                <div class="title">환불계좌</div>
                 <div class="account-info-row" onclick="showRefundAccountSheet()">
                     <div class="account-info"><strong>국민은행 213432534543 정혜진</strong></div>
                     <div class="account-chevron">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M9 6l6 6l-6 6" /></svg>
                     </div>
                 </div>
             </section>

            <nav class="status-tabs">
                <div class="tabs-scroll-wrapper">
                    <ul id="status-filter-tabs">
                        <li><a href="#" class="active" onclick="filterTransactions('전체', this)">전체</a></li>
                        <li><a href="#" onclick="filterTransactions('입금', this)">입금</a></li>
                        <li><a href="#" onclick="filterTransactions('사용', this)">사용</a></li>
                        <li><a href="#" onclick="filterTransactions('사용취소', this)">사용취소</a></li>
                        <li><a href="#" onclick="filterTransactions('출금', this)">출금</a></li>
                        <li><a href="#" onclick="filterTransactions('소멸', this)">소멸</a></li>
                    </ul>
                </div>
            </nav>

            <section class="filter-section">
                 <button type="button" class="text-select-button" onclick="showFilterSheet()">
                    <span class="text-select-button-text" id="selected-period-text">최근 1개월</span>
                    <div class="text-select-button-arrow">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M6 9l6 6l6 -6" /></svg>
                    </div>
                </button>
            </section>

            <section class="transaction-list-section">
                 <div class="transaction-list-header">
                     <span class="total-count">총 <strong id="transaction-count">5</strong>건</span>
                     <div class="view-count-select">
                        <span class="view-count-select-text">20건씩 보기</span>
                        <div class="view-count-select-arrow">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M6 9l6 6l6 -6" /></svg>
                        </div>
                    </div>
                 </div>

                 <div class="transaction-list" id="transaction-list-container">
                     <article class="transaction-card" data-type="사용">
                         <div class="card-body">
                             <div class="card-top"><div class="card-content">제품 접수 시 결제금액 차감 (sw823533)</div><div class="card-amount minus">-10,000</div></div>
                             <div class="card-divider"></div>
                             <div class="card-bottom"><div class="card-meta">2025-07-13 12:15 | 사용</div><div class="card-balance"><span class="label">잔액</span><span class="value">1,370,000</span></div></div>
                         </div>
                         <div class="card-footer"> <button type="button" class="white-button btn">상세</button> </div>
                     </article>
                     <article class="transaction-card" data-type="출금">
                         <div class="card-body">
                             <div class="card-top"><div class="card-content">출금 완료</div><div class="card-amount minus">-120,000</div></div>
                             <div class="card-divider"></div>
                             <div class="card-bottom"><div class="card-meta">2025-07-13 12:15 | 출금</div><div class="card-balance"><span class="label">잔액</span><span class="value">1,380,000</span></div></div>
                         </div>
                         <div class="card-footer"> <button type="button" class="white-button btn" onclick="showWithdrawalDetailsSheet({ withdrawer: '김성원', bank: '국민은행', account: '2134***4543', reason: '정상 처리' })">상세</button> </div>
                     </article>
                     <article class="transaction-card" data-type="출금">
                         <div class="card-body">
                             <div class="card-top"><div class="card-content">출금 대기</div><div class="card-amount minus">-50,000</div></div>
                             <div class="card-divider"></div>
                             <div class="card-bottom"><div class="card-meta">2025-07-14 09:30 | 출금</div><div class="card-balance"><span class="label">잔액</span><span class="value">1,330,000</span></div></div>
                         </div>
                         <div class="card-footer"> <button type="button" class="white-button btn" onclick="showWithdrawalDetailsSheet({ withdrawer: '김성원', bank: '국민은행', account: '2134***4543', reason: '처리 중' })">상세</button> <button type="button" class="dark-button btn">출금취소</button> </div>
                     </article>
                     <article class="transaction-card" data-type="출금">
                         <div class="card-body">
                             <div class="card-top">
                                 <div class="card-content">출금 실패<div class="card-status-fail">(사유: 비정상적인 계좌 정보입니다)</div></div>
                                 <div class="card-amount minus">-80,000</div>
                             </div>
                             <div class="card-divider"></div>
                             <div class="card-bottom"><div class="card-meta">2025-07-15 11:00 | 출금</div><div class="card-balance"><span class="label">잔액</span><span class="value">1,330,000</span></div></div>
                         </div>
                         <div class="card-footer"> <button type="button" class="white-button btn" onclick="showWithdrawalDetailsSheet({ withdrawer: '김성원', bank: '국민은행', account: '2134***4543', reason: '비정상적인 계좌 정보입니다' })">상세</button> </div>
                     </article>
                     <article class="transaction-card" data-type="입금">
                         <div class="card-body">
                             <div class="card-top"><div class="card-content">입금 완료</div><div class="card-amount plus">+1,500,000</div></div>
                             <div class="card-divider"></div>
                             <div class="card-bottom"><div class="card-meta">2025-07-12 10:04 | 입금</div><div class="card-balance"><span class="label">잔액</span><span class="value">1,500,000</span></div></div>
                         </div>
                     </article>
                 </div>
                 <div class="no-transactions" style="display: none;">성원머니 거래내역이 없습니다.</div>
                 
                 <div class="pagination" data-name="Pagination">
                    <div class="pagination-arrow disabled" onclick="paginationFirst()">
                        <img src="https://www.figma.com/api/mcp/asset/98c36079-6698-4fbf-8222-1c0b4fcaab1c" alt="처음" style="transform: rotate(90deg);">
                    </div>
                    <div class="pagination-arrow disabled" onclick="paginationPrev()">
                        <img src="https://www.figma.com/api/mcp/asset/5881851a-69b0-4a30-8ba8-bbb647a7fcc4" alt="이전" style="transform: rotate(90deg);">
                    </div>
                    <div class="pagination-numbers" id="pagination-numbers">
                        <div class="pagination-number active" data-page="1" onclick="paginationGo(1)">1</div>
                        <div class="pagination-number" data-page="2" onclick="paginationGo(2)">2</div>
                        <div class="pagination-number" data-page="3" onclick="paginationGo(3)">3</div>
                    </div>
                    <div class="pagination-arrow" onclick="paginationNext()">
                        <img src="https://www.figma.com/api/mcp/asset/9f728346-6da0-4d2b-a299-2137f0214aea" alt="다음" style="transform: rotate(90deg) scaleY(-1);">
                    </div>
                    <div class="pagination-arrow" onclick="paginationLast()">
                        <img src="https://www.figma.com/api/mcp/asset/4557e67d-fb94-45a7-a3da-e8690f677a05" alt="마지막" style="transform: rotate(90deg) scaleY(-1);">
                    </div>
                </div>
            </section>
        </main>
        
    </div>

    <div class="bottom-sheet-overlay" id="filter-sheet-overlay">
        <div class="bottom-sheet" data-name="bottom-sheet" id="filter-sheet">
            <div class="sheet-handle" id="filter-sheet-handle"></div>
            <div class="sheet-header"><div class="sheet-title">기간 상세검색</div><div class="btn-close" onclick="closeFilterSheet()"><svg id="icon-close"><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg></div></div>
            <div class="sheet-body" id="filter-sheet-body"><div class="filter-group" id="single-chip-group-period"><div class="filter-group-title">기간</div><div class="filter-group-content"><div class="single-chip single-chip-on" data-value="최근 1개월" onclick="selectPeriod(this)">최근 1개월</div><div class="single-chip single-chip-off" data-value="최근 3개월" onclick="selectPeriod(this)">최근 3개월</div><div class="single-chip single-chip-off" data-value="최근 6개월" onclick="selectPeriod(this)">최근 6개월</div><div class="single-chip single-chip-off" data-value="최근 1년" onclick="selectPeriod(this)">최근 1년</div><div class="single-chip single-chip-off" data-value="기간 설정" onclick="selectPeriod(this)">기간 설정</div></div></div></div>
            <div class="sheet-footer"><button class="btn white-button">초기화</button><button class="btn dark-button" onclick="applyPeriodFilter()">조회하기</button></div>
        </div>
    </div>
    <div class="bottom-sheet-overlay" id="account-options-overlay">
        <div class="bottom-sheet" data-name="bottom-sheet" id="account-options-sheet">
            <div class="sheet-handle" id="account-options-handle"></div>
            <div class="sheet-header"><div class="sheet-title">계좌 관리</div><div class="btn-close" onclick="closeAccountOptionsSheet()"><svg id="icon-close-options"><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg></div></div>
            <div class="sheet-body"><ul class="option-list"><li><button type="button" onclick="alert('발급 확인서 클릭됨'); closeAccountOptionsSheet();">발급 확인서</button></li><li><button type="button" onclick="alert('변경내역 클릭됨'); closeAccountOptionsSheet();">변경내역</button></li><li><button type="button" onclick="alert('가상계좌 변경 클릭됨'); closeAccountOptionsSheet();">가상계좌 변경</button></li></ul></div>
        </div>
    </div>
    <div class="bottom-sheet-overlay" id="refund-account-overlay">
        <div class="bottom-sheet" data-name="bottom-sheet" id="refund-account-sheet">
            <div class="sheet-handle" id="refund-account-handle"></div>
            <div class="sheet-header"><div class="sheet-title">환불계좌 변경</div><div class="btn-close" onclick="closeRefundAccountSheet()"><svg id="icon-close-refund"><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg></div></div>
            <div class="sheet-body"><p style="padding: 20px; text-align: center; color: #666;">환불계좌 변경 폼 Placeholder</p></div>
            <div class="sheet-footer"><button class="btn white-button" onclick="closeRefundAccountSheet()">취소</button><button class="btn dark-button" onclick="alert('환불계좌 변경 로직 실행'); closeRefundAccountSheet();">변경하기</button></div>
        </div>
    </div>
    <div class="bottom-sheet-overlay" id="withdrawal-details-overlay">
        <div class="bottom-sheet" data-name="bottom-sheet" id="withdrawal-details-sheet">
            <div class="sheet-handle" id="withdrawal-details-handle"></div>
            <div class="sheet-header"><div class="sheet-title">출금 상세 정보</div><div class="btn-close" onclick="closeWithdrawalDetailsSheet()"><svg id="icon-close-details"><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg></div></div>
            <div class="sheet-body"><div class="detail-item"><span class="label">출금자</span><span class="value" id="detail-withdrawer"></span></div><div class="detail-item"><span class="label">출금은행</span><span class="value" id="detail-bank"></span></div><div class="detail-item"><span class="label">계좌번호</span><span class="value" id="detail-account"></span></div><div class="detail-item"><span class="label">출금사유</span><span class="value" id="detail-reason"></span></div></div>
            <div class="sheet-footer"><button class="btn dark-button" onclick="closeWithdrawalDetailsSheet()">확인</button></div>
        </div>
    </div>

    <script>
        // --- Bottom Sheet Logic ---
        function setupBottomSheet(overlayId, sheetId, handleId) {
            const overlay = document.getElementById(overlayId); const sheet = document.getElementById(sheetId); const handle = document.getElementById(handleId);
            if (!overlay || !sheet || !handle) return { openSheet: ()=>{}, closeSheet: ()=>{} };
            let isDragging = false, startY = 0, currentY = 0;
            const openSheet = () => { overlay.classList.add('active'); sheet.classList.remove('closing'); document.body.style.overflow = 'hidden'; };
            const closeSheet = () => { sheet.classList.add('closing'); document.body.style.overflow = ''; setTimeout(() => { overlay.classList.remove('active'); sheet.classList.remove('closing'); }, 300); };
            const startDrag = (e) => { isDragging = true; startY = e.type === 'mousedown' ? e.clientY : e.touches[0].clientY; sheet.style.transition = 'none'; };
            const drag = (e) => { if (!isDragging) return; e.preventDefault(); currentY = e.type === 'mousemove' ? e.clientY : e.touches[0].clientY; const deltaY = currentY - startY; if (deltaY > 0) sheet.style.transform = `translateY(${deltaY}px)`; };
            const endDrag = () => { if (!isDragging) return; isDragging = false; sheet.style.transition = ''; const deltaY = currentY - startY; if (deltaY > 100) closeSheet(); else sheet.style.transform = ''; };
            handle.addEventListener('mousedown', startDrag); handle.addEventListener('touchstart', startDrag, { passive: false });
            document.addEventListener('mousemove', drag); document.addEventListener('touchmove', drag, { passive: false });
            document.addEventListener('mouseup', endDrag); document.addEventListener('touchend', endDrag);
            overlay.addEventListener('click', (e) => { if (e.target.id === overlayId) closeSheet(); });
            return { openSheet, closeSheet };
        }
        const { openSheet: showFilterSheet, closeSheet: closeFilterSheet } = setupBottomSheet('filter-sheet-overlay', 'filter-sheet', 'filter-sheet-handle');
        const { openSheet: showAccountOptionsSheet, closeSheet: closeAccountOptionsSheet } = setupBottomSheet('account-options-overlay', 'account-options-sheet', 'account-options-handle');
        const { openSheet: showRefundAccountSheet, closeSheet: closeRefundAccountSheet } = setupBottomSheet('refund-account-overlay', 'refund-account-sheet', 'refund-account-handle');
        const { openSheet: _showWithdrawalDetailsSheet, closeSheet: closeWithdrawalDetailsSheet } = setupBottomSheet('withdrawal-details-overlay', 'withdrawal-details-sheet', 'withdrawal-details-handle'); // v16

        // --- Filter Component Handlers ---
        let selectedPeriodValue = "최근 1개월"; 
        function selectPeriod(chip) { const group = chip.closest('.filter-group-content'); group.querySelectorAll('.single-chip').forEach(c => c.classList.replace('single-chip-on', 'single-chip-off')); chip.classList.replace('single-chip-off', 'single-chip-on'); selectedPeriodValue = chip.getAttribute('data-value'); }
        function applyPeriodFilter() { document.getElementById('selected-period-text').textContent = selectedPeriodValue; document.querySelector('.text-select-button')?.classList.remove('open'); closeFilterSheet(); console.log("기간 필터 적용:", selectedPeriodValue); /* TODO: Filtering logic */ }
        document.querySelector('.text-select-button')?.addEventListener('click', function() { this.classList.toggle('open'); });

        // --- Transaction List Filtering ---
        function filterTransactions(status, clickedTab) {
            document.querySelectorAll('#status-filter-tabs a').forEach(tab => tab.classList.remove('active')); clickedTab.classList.add('active');
            const listContainer = document.getElementById('transaction-list-container'); const cards = listContainer.querySelectorAll('.transaction-card'); const noResultMsg = listContainer.parentElement.querySelector('.no-transactions');
            let visibleCount = 0;
            cards.forEach(card => { const cardType = card.getAttribute('data-type'); if (status === '전체' || cardType === status) { card.style.display = ''; visibleCount++; } else { card.style.display = 'none'; } });
            document.getElementById('transaction-count').textContent = visibleCount; noResultMsg.style.display = visibleCount === 0 ? 'block' : 'none';
        }
        
        // --- [v16] Withdrawal Details Bottom Sheet ---
        function showWithdrawalDetailsSheet(details) {
            // Populate details into the bottom sheet
            document.getElementById('detail-withdrawer').textContent = details.withdrawer || '-';
            document.getElementById('detail-bank').textContent = details.bank || '-';
            document.getElementById('detail-account').textContent = details.account || '-';
            const reasonEl = document.getElementById('detail-reason');
            reasonEl.textContent = details.reason || '-';
            // Highlight fail reason
            reasonEl.classList.toggle('fail-reason', details.reason && (details.reason.includes('실패') || details.reason.includes('비정상')));
            _showWithdrawalDetailsSheet(); // Use the setup function
        }

        // --- [v16] Pagination Logic ---
        let currentPage = 1; const totalPages = 3; 
        function paginationGo(page) { currentPage = page; updatePagination(); console.log('Page changed to:', page); /* TODO: Fetch data */ }
        function paginationPrev() { if (currentPage > 1) paginationGo(currentPage - 1); }
        function paginationNext() { if (currentPage < totalPages) paginationGo(currentPage + 1); }
        function paginationFirst() { paginationGo(1); }
        function paginationLast() { paginationGo(totalPages); }
        function updatePagination() {
            const numbers = document.querySelectorAll('.pagination-number'); const prevArrows = document.querySelectorAll('.pagination .pagination-arrow:nth-child(-n+2)'); const nextArrows = document.querySelectorAll('.pagination .pagination-arrow:nth-child(n+4)');
            numbers.forEach(num => { num.classList.remove('active'); if (parseInt(num.dataset.page) === currentPage) num.classList.add('active'); });
            prevArrows.forEach(arrow => arrow.classList.toggle('disabled', currentPage === 1)); nextArrows.forEach(arrow => arrow.classList.toggle('disabled', currentPage === totalPages));
        }
        document.addEventListener('DOMContentLoaded', updatePagination); 
    </script>
</body>
</html>