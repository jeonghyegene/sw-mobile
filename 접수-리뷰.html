<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>리뷰</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* [v12] Master Guide CSS & Base Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f4f5f7;
            color: #333;
            font-size: 16px;
            line-height: 1.6;
        }

        ul,
        li {
            list-style: none;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        button {
            font-family: inherit;
            border: none;
            cursor: pointer;
            background: none;
            text-align: left;
        }

        img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: block;
        }

        svg {
            stroke-width: 2;
            fill: none;
            stroke: currentColor;
            stroke-linecap: round;
            stroke-linejoin: round;
            flex-shrink: 0;
            display: block;
        }

        /* Layout */
        .mobile-wrap {
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
            background-color: #ffffff;
            padding-bottom: 20px;
        }

        /* Header (v12) */
        .app-header-sub {
            height: 56px;
            background: white;
            border-bottom: 1px solid #cccccc;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            cursor: pointer;
            color: #333;
        }

        .header-title {
            flex: 3 0 0;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            color: #212121;
        }

        /* Main Content */
        .sw-container {
            padding: 16px;
        }

        /* Review Summary & Stats */
        .info-section {
            background: #fff;
            border: 1px solid #e8e8e9;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .review-summary-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        .review-summary-score {
            font-size: 24px;
            font-weight: 700;
            color: #333;
        }

        .review-summary-rating {
            font-size: 20px;
        }

        .review-summary-rating svg {
            fill: #FFC107;
        }

        .review-summary-rating svg.empty_star {
            fill: none;
        }

        .review-stats-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .stats-item-card {
            border: 1px solid #e8e8e9;
            border-radius: 6px;
            overflow: hidden;
            transition: background 0.2s;
        }

        .stats-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            cursor: pointer;
        }

        .stats-item-header:hover {
            background: #f8f8f9;
        }

        .stats-item-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
            flex: 1;
            min-width: 0;
            margin-right: 12px;
        }

        .stats-category {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .stats-top-keyword {
            font-size: 13px;
            color: #555;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .stats-item-summary {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .summary-item-bar-wrapper {
            width: 60px;
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
        }

        .summary-item-bar {
            height: 100%;
            border-radius: 3px;
        }

        .summary-item-bar.quality {
            background: #4e6ee4;
        }

        .summary-item-bar.production {
            background: #28a745;
        }

        .summary-item-bar.price {
            background: #ffc107;
        }

        .summary-item-bar.shipping {
            background: #17a2b8;
        }

        .stats-percentage {
            font-size: 13px;
            font-weight: 500;
            color: #333;
            width: 30px;
            text-align: right;
            flex-shrink: 0;
        }

        .stats-arrow {
            width: 16px;
            height: 16px;
            color: #888;
            flex-shrink: 0;
        }

        .stats-arrow svg {
            transition: transform 0.3s ease;
        }

        .stats-item-card.expanded .stats-arrow svg {
            transform: rotate(-180deg);
        }

        .stats-item-body {
            display: none;
            background: #f8f8f9;
            padding: 16px;
            border-top: 1px solid #e8e8e9;
        }

        .stats-keyword-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .stats-keyword-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stats-keyword-name {
            font-size: 13px;
            color: #555;
            flex: 1;
            min-width: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Transaction List Header */
        .transaction-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            font-size: 14px;
            color: #555;
            border-bottom: 1px solid #f0f0f0;
            margin-bottom: 16px;
        }

        .sort-select-button {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            transition: opacity 0.2s;
            user-select: none;
        }

        .sort-select-button-text {
            font-size: 14px;
            color: #2c2c2c;
            font-weight: 500;
        }

        .sort-select-button-arrow {
            width: 16px;
            height: 16px;
            color: #555;
        }

        /* Checkbox */
        .checkbox {
            width: 20px;
            height: 20px;
            position: relative;
            cursor: pointer;
            user-select: none;
            flex-shrink: 0;
        }

        .checkbox-off {
            width: 100%;
            height: 100%;
            background: white;
            border: 1px solid #bdbdbd;
            border-radius: 2px;
        }

        .checkbox-on {
            width: 100%;
            height: 100%;
            background: #4e6ee4;
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .checkbox-on img {
            width: 14px;
            height: 14px;
        }

        .checkbox-text {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            user-select: none;
        }

        .checkbox-text span {
            font-size: 14px;
            color: #333;
        }

        /* Review List */
        .transaction-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 24px;
        }

        .written-review-card {
            border: 1px solid #e8e8e9;
            border-radius: 6px;
            background: #fff;
            overflow: hidden;
        }

        .card-body {
            padding: 16px;
            cursor: pointer;
        }

        .card-review-rating {
            font-size: 16px;
            margin-bottom: 8px;
        }

        .card-review-rating svg {
            fill: #FFC107;
        }

        .card-review-rating svg.empty_star {
            fill: none;
        }

        .card-product-spec {
            font-size: 13px;
            color: #888;
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .card-review-text {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
            margin-bottom: 12px;
            white-space: normal;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            max-height: 67.2px;
        }

        .card-review-text.expanded {
            -webkit-line-clamp: unset;
            max-height: none;
        }

        .card-review-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 12px;
        }

        .review-chip-sm-group {
            background: #f5f5f6;
            color: #8a8a92;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 100px;
            display: inline-flex;
        }

        .review-chip-sm-group .category {
            font-weight: 600;
            color: #555;
            margin-right: 4px;
        }

        .review-chip-sm-group .keyword {
            color: #8a8a92;
        }

        .card-review-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-review-author-date {
            font-size: 13px;
            color: #888;
        }

        .expand-toggle {
            font-size: 13px;
            font-weight: 500;
            color: #555;
            cursor: pointer;
            padding: 4px;
        }

        .card-thumbnail-list {
            display: flex;
            gap: 8px;
            padding: 16px 16px 0 16px;
            overflow-x: auto;
            cursor: pointer;
        }

        .card-thumbnail-list img {
            width: 70px;
            height: 70px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #eee;
            flex-shrink: 0;
        }

        .written-review-card[data-has-images="false"] .card-thumbnail-list {
            display: none;
        }

        .written-review-card[data-has-images="false"] .card-body {
            padding-top: 16px;
        }

        .written-review-card[data-has-images="true"] .card-body {
            padding-top: 12px;
        }

        /* Pagination */
        .pagination {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 9px;
        }

        .pagination-arrow {
            width: 15px;
            height: 15px;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pagination-arrow img {
            width: 100%;
            height: auto;
        }

        .pagination-arrow.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .pagination-numbers {
            display: flex;
            gap: 3px;
        }

        .pagination-number {
            min-width: 28px;
            height: 28px;
            padding: 4px 5px;
            border-radius: 4px;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .pagination-number.active {
            background: #4e6ee4;
            color: white;
        }

        .pagination-number:not(.active) {
            background: white;
            color: #bcbcbc;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 16px;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeInModal 0.2s ease-out;
        }

        @keyframes fadeInModal {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modal-content {
            background: white;
            border-radius: 8px;
            width: 100%;
            max-width: 360px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            animation: scaleUpModal 0.2s ease-out;
        }

        @keyframes scaleUpModal {
            from {
                transform: scale(0.9);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border-bottom: 1px solid #e8e8e9;
        }

        .modal-title {
            font-size: 16px;
            font-weight: 700;
            color: black;
        }

        .btn-modal-close {
            width: 24px;
            height: 24px;
            cursor: pointer;
            color: #888;
        }

        .modal-body {
            padding: 16px;
            overflow-y: auto;
            flex-grow: 1;
        }

        /* Review Detail Modal */
        #review-detail-modal .modal-body {
            padding: 0;
        }

        .review-carousel-container {
            position: relative;
            width: 100%;
            overflow: hidden;
            background: #f0f0f0;
            display: none;
            aspect-ratio: 1 / 1;
        }

        .review-carousel-container.has-images {
            display: block;
        }

        .review-carousel-track {
            display: flex;
            transition: transform 0.3s ease-in-out;
            height: 100%;
        }

        .review-carousel-track .slide {
            min-width: 100%;
            height: 100%;
            flex-shrink: 0;
        }

        .review-carousel-track .slide img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            font-size: 18px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-btn.prev {
            left: 8px;
        }

        .carousel-btn.next {
            right: 8px;
        }

        .carousel-btn.hidden {
            display: none;
        }

        .carousel-pagination {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 6px;
            z-index: 10;
        }

        .carousel-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: background 0.3s;
        }

        .carousel-dot.active {
            background: white;
        }

        .review-detail-content {
            padding: 16px;
        }

        .review-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .review-detail-product {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .review-detail-spec {
            font-size: 12px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .review-detail-rating {
            font-size: 18px;
            margin-bottom: 12px;
        }

        .review-detail-rating svg {
            fill: #FFC107;
        }

        .review-detail-rating svg.empty_star {
            fill: none;
        }

        .review-detail-text {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
            margin-bottom: 16px;
            white-space: pre-wrap;
        }

        .review-detail-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .review-detail-footer-date {
            font-size: 13px;
            color: #888;
            text-align: right;
            margin-top: 16px;
        }
    </style>
</head>

<body>
    <div class="mobile-wrap">

        <header class="app-header-sub">
            <div class="header-left">
                <button type="button" class="header-btn" onclick="history.back();">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24"
                        id="icon-chevron-left">
                        <path d="M15 6l-6 6l6 6" />
                    </svg>
                </button>
            </div>
            <h1 class="header-title">리뷰</h1>
            <div class="header-right"></div>
        </header>

        <main>
            <div id="page-content-review">
                <div class="sw-container" style="padding-top: 16px;">

                    <section class="info-section">
                        <div class="review-summary-header">
                            <span class="review-summary-score">4.0</span>
                            <div class="review-summary-rating" id="summary-rating-stars"></div>
                        </div>

                        <div class="review-stats-list" id="review-stats-list">

                            <div class="stats-item-card">
                                <div class="stats-item-header" onclick="toggleStats(this)">
                                    <div class="stats-item-info">
                                        <span class="stats-category">품질</span>
                                        <span class="stats-top-keyword">원하는 색감이 잘 구현됐어요</span>
                                    </div>
                                    <div class="stats-item-summary">
                                        <div class="summary-item-bar-wrapper">
                                            <div class="summary-item-bar quality" style="width: 98%;"></div>
                                        </div>
                                        <span class="stats-percentage">98%</span>
                                        <div class="stats-arrow">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                viewBox="0 0 24 24">
                                                <path d="M6 9l6 6l6 -6" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="stats-item-body">
                                    <ul class="stats-keyword-list">
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">원하는 색감이 잘 구현됐어요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar quality" style="width: 98%;"></div>
                                            </div>
                                            <span class="stats-percentage">98%</span>
                                        </li>
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">재질이 만족스러워요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar quality" style="width: 75%;"></div>
                                            </div>
                                            <span class="stats-percentage">75%</span>
                                        </li>
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">재단·가공이 깔끔해요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar quality" style="width: 60%;"></div>
                                            </div>
                                            <span class="stats-percentage">60%</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="stats-item-card">
                                <div class="stats-item-header" onclick="toggleStats(this)">
                                    <div class="stats-item-info">
                                        <span class="stats-category">제작/접수</span>
                                        <span class="stats-top-keyword">제작 속도가 빨라요</span>
                                    </div>
                                    <div class="stats-item-summary">
                                        <div class="summary-item-bar-wrapper">
                                            <div class="summary-item-bar production" style="width: 55%;"></div>
                                        </div>
                                        <span class="stats-percentage">55%</span>
                                        <div class="stats-arrow">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                viewBox="0 0 24 24">
                                                <path d="M6 9l6 6l6 -6" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="stats-item-body">
                                    <ul class="stats-keyword-list">
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">제작 속도가 빨라요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar production" style="width: 55%;"></div>
                                            </div>
                                            <span class="stats-percentage">55%</span>
                                        </li>
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">오류없이 제작돼요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar production" style="width: 40%;"></div>
                                            </div>
                                            <span class="stats-percentage">40%</span>
                                        </li>
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">접수가 편리해요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar production" style="width: 30%;"></div>
                                            </div>
                                            <span class="stats-percentage">30%</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="stats-item-card">
                                <div class="stats-item-header" onclick="toggleStats(this)">
                                    <div class="stats-item-info">
                                        <span class="stats-category">가격</span>
                                        <span class="stats-top-keyword">다른 곳보다 합리적인 가격이에요</span>
                                    </div>
                                    <div class="stats-item-summary">
                                        <div class="summary-item-bar-wrapper">
                                            <div class="summary-item-bar price" style="width: 68%;"></div>
                                        </div>
                                        <span class="stats-percentage">68%</span>
                                        <div class="stats-arrow">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                viewBox="0 0 24 24">
                                                <path d="M6 9l6 6l6 -6" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="stats-item-body">
                                    <ul class="stats-keyword-list">
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">다른 곳보다 합리적인 가격이에요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar price" style="width: 68%;"></div>
                                            </div>
                                            <span class="stats-percentage">68%</span>
                                        </li>
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">가격 대비 품질이 좋아요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar price" style="width: 60%;"></div>
                                            </div>
                                            <span class="stats-percentage">60%</span>
                                        </li>
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">재주문할 만큼 가성비가 좋아요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar price" style="width: 50%;"></div>
                                            </div>
                                            <span class="stats-percentage">50%</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="stats-item-card">
                                <div class="stats-item-header" onclick="toggleStats(this)">
                                    <div class="stats-item-info">
                                        <span class="stats-category">배송</span>
                                        <span class="stats-top-keyword">포장이 꼼꼼하고 안전했어요</span>
                                    </div>
                                    <div class="stats-item-summary">
                                        <div class="summary-item-bar-wrapper">
                                            <div class="summary-item-bar shipping" style="width: 80%;"></div>
                                        </div>
                                        <span class="stats-percentage">80%</span>
                                        <div class="stats-arrow">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                viewBox="0 0 24 24">
                                                <path d="M6 9l6 6l6 -6" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="stats-item-body">
                                    <ul class="stats-keyword-list">
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">포장이 꼼꼼하고 안전했어요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar shipping" style="width: 80%;"></div>
                                            </div>
                                            <span class="stats-percentage">80%</span>
                                        </li>
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">배송 현황 안내가 잘 돼요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar shipping" style="width: 50%;"></div>
                                            </div>
                                            <span class="stats-percentage">50%</span>
                                        </li>
                                        <li class="stats-keyword-item">
                                            <span class="stats-keyword-name">배송이 빠르고 정확해요</span>
                                            <div class="summary-item-bar-wrapper">
                                                <div class="summary-item-bar shipping" style="width: 30%;"></div>
                                            </div>
                                            <span class="stats-percentage">30%</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                        </div>
                    </section>

                    <section class="transaction-list-section">
                        <div class="transaction-list-header">
                            <div class="checkbox-text" onclick="toggleCheckboxText(this)">
                                <div class="checkbox" data-checked="false">
                                    <div class="checkbox-off"></div>
                                </div>
                                <span>포토 리뷰만 모아보기</span>
                            </div>
                            <button type="button" class="sort-select-button">
                                <span class="sort-select-button-text">추천순</span>
                                <div class="sort-select-button-arrow">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                                        <path d="M6 9l6 6l6 -6" />
                                    </svg>
                                </div>
                            </button>
                        </div>

                        <div class="transaction-list" id="review-list-container">

                            <article class="written-review-card" data-has-images="true"
                                data-images="https://picsum.photos/id/102/300/300,https://picsum.photos/id/103/300/300,https://picsum.photos/id/104/300/300">
                                <div class="card-thumbnail-list"
                                    onclick="openReviewDetailModal(this); event.stopPropagation();">
                                    <img src="https://picsum.photos/id/102/150/150" alt="리뷰 썸네일 1">
                                    <img src="https://picsum.photos/id/103/150/150" alt="리뷰 썸네일 2">
                                    <img src="https://picsum.photos/id/104/150/150" alt="리뷰 썸네일 3">
                                </div>
                                <div class="card-body" onclick="openReviewDetailModal(this)">
                                    <div class="card-product-spec">용지: (표지) 스노우지 / 백색 / 250g, (내지) 아트지 / 백색 / 100g | 인쇄:
                                        (표지) 양면 / CMYK / 일반, (내지)단면 / K / 일반 | 제본: 왼쪽 / 무선 | 사이즈: A4(210x195) | 가공: 박 /
                                        오시 / 도무송</div>
                                    <div class="card-review-rating" id="card-rating-1"></div>
                                    <div class="card-review-text">색감이 모니터에서 보던 그대로 나와서 정말 만족스러웠어요. 종이 질감도 고급스럽고 마감이 깔끔해서
                                        다음에 꼭 재주문하려고 합니다.</div>
                                    <div class="card-review-chips">
                                        <span class="review-chip-sm-group"><strong class="category">품질</strong><span
                                                class="keyword">원하는 색감이 잘 구현됐어요</span></span>
                                        <span class="review-chip-sm-group"><strong class="category">가격</strong><span
                                                class="keyword">다른 곳보다 합리적인 가격이에요</span></span>
                                    </div>
                                    <div class="card-review-footer">
                                        <span class="card-review-author-date">홍*동 | 2025-08-08</span>
                                        <button class="expand-toggle"
                                            onclick="toggleReviewText(this); event.stopPropagation();">더보기</button>
                                    </div>
                                </div>
                            </article>

                            <article class="written-review-card" data-has-images="false">
                                <div class="card-thumbnail-list"
                                    onclick="openReviewDetailModal(this); event.stopPropagation();">
                                </div>
                                <div class="card-body" onclick="openReviewDetailModal(this)">
                                    <div class="card-product-spec">용지: (표지) 스노우지 / 백색 / 250g, (내지) 아트지 / 백색 / 100g | 인쇄:
                                        (표지) 양면 / CMYK / 일반, (내지)단면 / K / 일반 | 제본: 왼쪽 / 무선 | 사이즈: A4(210x195) | 가공: 박 /
                                        오시 / 도무송</div>
                                    <div class="card-review-rating" id="card-rating-2"></div>
                                    <div class="card-review-text">첫 책자 제작이라 많이 고민했는데, 상세한 안내 덕분에 어렵지 않게 주문할 수 있었습니다.
                                        스노우지 300g 무광 코팅으로 선택했는데, 두께감이 있어 손에 쥐었을 때 안정적이고 고급스러운 느낌을 줍니다. 인쇄도 선명하고 작은 글씨까지
                                        깔끔하게 표현되어 전문적인 이미지를 전달하기에 충분했습니다. 색상도 시안과 거의 동일하게 나와서 믿을 수 있었고, 배송도 예상보다 빠르게 도착해
                                        급하게 필요한 자리에서도 유용하게 활용할 수 있었습니다. 포장도 꼼꼼해서 제품이 손상될 걱정이 없었어요. 다만 코팅을 하지 않은 부분은 지문이
                                        조금 남는 편이라 아쉬움이 있었지만, 전반적으로 가격 대비 만족도가 높습니다. 처음 명함을 제작하거나 대량 제작이 필요한 분들께 자신 있게
                                        추천드릴 수 있는 제품이에요</div>
                                    <div class="card-review-chips">
                                        <span class="review-chip-sm-group"><strong class="category">배송</strong><span
                                                class="keyword">배송이 빠르고 정확해요</span></span>
                                        <span class="review-chip-sm-group"><strong class="category">제작/접수</strong><span
                                                class="keyword">오류없이 제작돼요</span></span>
                                        <span class="review-chip-sm-group"><strong class="category">가격</strong><span
                                                class="keyword">다른 곳보다 합리적인 가격이에요</span></span>
                                    </div>
                                    <div class="card-review-footer">
                                        <span class="card-review-author-date">홍*동 | 2025-08-08</span>
                                        <button class="expand-toggle"
                                            onclick="toggleReviewText(this); event.stopPropagation();">더보기</button>
                                    </div>
                                </div>
                            </article>

                        </div>

                        <div class="no-transactions" id="no-review-list" style="display: none;">작성된 리뷰가 없어요</div>

                        <div class="pagination" data-name="Pagination">
                            <div class="pagination-arrow disabled" onclick="paginationFirst()">
                                <img src="assets/images/nnext-arrow.svg"
                                    alt="처음" style="transform: rotate(90deg);">
                            </div>
                            <div class="pagination-arrow disabled" onclick="paginationPrev()">
                                <img src="assets/images/next-arrow.svg"
                                    alt="이전" style="transform: rotate(90deg);">
                            </div>
                            <div class="pagination-numbers" id="pagination-numbers-review">
                                <div class="pagination-number active" data-page="1" onclick="paginationGo(1)">1</div>
                            </div>
                            <div class="pagination-arrow disabled" onclick="paginationNext()">
                                <img src="assets/images/next-arrow.svg" alt="다음"
                                    style="transform: rotate(90deg) scaleY(-1);">
                            </div>
                            <div class="pagination-arrow disabled" onclick="paginationLast()">
                                <img src="assets/images/nnext-arrow.svg"
                                    alt="마지막" style="transform: rotate(90deg) scaleY(-1);">
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>

    <div class="modal-overlay" id="review-detail-modal-overlay">
        <div class="modal-content" id="review-detail-modal">
            <div class="modal-header">
                <h2 class="modal-title">리뷰 상세</h2>
                <button class="btn-modal-close" onclick="closeModal('review-detail-modal-overlay')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M18 6l-12 12" />
                        <path d="M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="review-carousel-container" id="detail-modal-carousel-container">
                    <div class="review-carousel-track" id="detail-modal-track">
                    </div>
                    <button class="carousel-btn prev" onclick="moveSlide(-1)">&#10094;</button>
                    <button class="carousel-btn next" onclick="moveSlide(1)">&#10095;</button>
                    <div class="carousel-pagination" id="detail-modal-pagination">
                    </div>
                </div>

                <div class="review-detail-content">
                    <div class="review-detail-header">
                        <span class="review-detail-product" id="detail-modal-product"></span>
                    </div>
                    <div class="review-detail-spec" id="detail-modal-spec"></div>
                    <div class="review-detail-rating" id="detail-modal-rating"></div>
                    <div class="review-detail-text" id="detail-modal-text"></div>
                    <div class="review-detail-chips" id="detail-modal-chips"></div>
                    <div class="review-detail-footer-date" id="detail-modal-date"></div>
                </div>
            </div>
        </div>
    </div>


    <script>
        // --- Checkbox (v12) ---
        function toggleCheckbox(checkbox) {
            const isChecked = checkbox.dataset.checked === 'true';
            if (isChecked) {
                checkbox.dataset.checked = 'false';
                checkbox.innerHTML = '<div class="checkbox-off"></div>';
            } else {
                checkbox.dataset.checked = 'true';
                checkbox.innerHTML = `<div class="checkbox-on"><img src="assets/images/checked.svg" alt="체크"></div>`;
            }
            return checkbox.dataset.checked === 'true';
        }

        function toggleCheckboxText(wrapper) {
            const checkbox = wrapper.querySelector('.checkbox');
            const isChecked = toggleCheckbox(checkbox);
            console.log("포토 리뷰 필터:", isChecked);
        }

        // --- Pagination ---
        let reviewCurrentPage = 1; const reviewTotalPages = 1;

        function paginationGo(page) {
            reviewCurrentPage = page;
            updatePagination();
            console.log(`Page changed:`, page);
        }

        function updatePagination() {
            const numbersContainer = document.getElementById('pagination-numbers-review');
            if (!numbersContainer) return;

            numbersContainer.innerHTML = '';
            for (let i = 1; i <= reviewTotalPages; i++) {
                const numEl = document.createElement('div');
                numEl.className = 'pagination-number' + (i === reviewCurrentPage ? ' active' : '');
                numEl.dataset.page = i;
                numEl.textContent = i;
                numEl.onclick = () => paginationGo(i);
                numbersContainer.appendChild(numEl);
            }

            const paginationRoot = numbersContainer.closest('.pagination');
            if (!paginationRoot) return;
            const prevArrows = paginationRoot.querySelectorAll('.pagination-arrow:nth-child(-n+2)');
            const nextArrows = paginationRoot.querySelectorAll('.pagination-arrow:nth-child(n+4)');

            prevArrows.forEach(arrow => arrow.classList.toggle('disabled', reviewCurrentPage === 1));
            nextArrows.forEach(arrow => arrow.classList.toggle('disabled', reviewCurrentPage === reviewTotalPages));
        }

        // --- Modal ---
        function openModal(overlayId) {
            const overlay = document.getElementById(overlayId);
            if (overlay) {
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(overlayId) {
            const overlay = document.getElementById(overlayId);
            if (overlay) {
                overlay.classList.remove('active');
                const anyModalActive = document.querySelector('.modal-overlay.active');
                if (!anyModalActive) {
                    document.body.style.overflow = '';
                }
            }
        }

        // --- Star Rating ---
        function generateStarRatingHTML(rating, size = 16) {
            let html = '';
            const filledStar = `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="currentColor" style="flex-shrink: 0; color: #FFC107; stroke: none;"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z" /></svg>`;
            const emptyStar = `<svg width="${size}" height="${size}" class="empty_star" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="flex-shrink: 0; color: #e0e0e0;"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z" /></svg>`;

            html = '<div style="display: flex; gap: 2px;">';
            for (let i = 0; i < 5; i++) {
                html += (i < rating) ? filledStar : emptyStar;
            }
            html += '</div>';
            return html;
        }

        // --- Review Text Toggle ---
        function toggleReviewText(button) {
            const cardBody = button.closest('.card-body');
            const reviewText = cardBody.querySelector('.card-review-text');

            reviewText.classList.toggle('expanded');
            if (reviewText.classList.contains('expanded')) {
                button.textContent = '접기';
            } else {
                button.textContent = '더보기';
            }
        }

        // --- Stats Accordion ---
        function toggleStats(headerElement) {
            const card = headerElement.closest('.stats-item-card');
            if (!card) return;

            const body = card.querySelector('.stats-item-body');
            const isExpanded = card.classList.toggle('expanded');

            if (isExpanded) {
                body.style.display = 'block';
            } else {
                body.style.display = 'none';
            }
        }

        // --- Review Detail Modal & Carousel ---
        let currentReviewCard = null;
        let currentSlide = 0;
        let totalSlides = 0;
        let slideTrack;
        let paginationDots;

        function openReviewDetailModal(element) {
            currentReviewCard = element.closest('.written-review-card');

            const productSpec = currentReviewCard.querySelector('.card-product-spec').textContent;
            const ratingValue = (currentReviewCard.querySelector('.card-review-rating').innerHTML.match(/fill="currentColor"/g) || []).length;
            const text = currentReviewCard.querySelector('.card-review-text').textContent;
            const date = currentReviewCard.querySelector('.card-review-author-date').textContent.split('|')[1].trim();
            const author = currentReviewCard.querySelector('.card-review-author-date').textContent.split('|')[0].trim();
            const chipsHtml = currentReviewCard.querySelector('.card-review-chips').innerHTML;

            document.getElementById('detail-modal-product').textContent = author + "님의 리뷰";
            document.getElementById('detail-modal-spec').textContent = productSpec;
            document.getElementById('detail-modal-rating').innerHTML = generateStarRatingHTML(ratingValue, 18);
            document.getElementById('detail-modal-text').textContent = text;
            document.getElementById('detail-modal-date').textContent = date;
            document.getElementById('detail-modal-chips').innerHTML = chipsHtml;

            const imageUrls = currentReviewCard.dataset.images ? currentReviewCard.dataset.images.split(',') : [];
            slideTrack = document.getElementById('detail-modal-track');
            paginationDots = document.getElementById('detail-modal-pagination');
            const carouselContainer = document.getElementById('detail-modal-carousel-container');

            slideTrack.innerHTML = '';
            paginationDots.innerHTML = '';
            currentSlide = 0;
            totalSlides = imageUrls.length;

            if (totalSlides > 0) {
                carouselContainer.classList.add('has-images');
                imageUrls.forEach((url, index) => {
                    const slide = document.createElement('div');
                    slide.className = 'slide';
                    const img = document.createElement('img');
                    img.src = url;
                    img.alt = `리뷰 이미지 ${index + 1}`;
                    slide.appendChild(img);
                    slideTrack.appendChild(slide);

                    const dot = document.createElement('div');
                    dot.className = 'carousel-dot';
                    dot.onclick = () => jumpToSlide(index);
                    paginationDots.appendChild(dot);
                });
                showSlide(0);
            } else {
                carouselContainer.classList.remove('has-images');
            }

            openModal('review-detail-modal-overlay');
        }

        function showSlide(index) {
            if (index >= totalSlides) index = 0;
            if (index < 0) index = totalSlides - 1;

            if (slideTrack) {
                slideTrack.style.transform = `translateX(-${index * 100}%)`;
            }
            currentSlide = index;

            updateCarouselUI();
        }

        function moveSlide(n) {
            showSlide(currentSlide + n);
        }

        function jumpToSlide(index) {
            showSlide(index);
        }

        function updateCarouselUI() {
            const dots = paginationDots.querySelectorAll('.carousel-dot');
            if (dots.length > 0) {
                dots.forEach(dot => dot.classList.remove('active'));
                if (dots[currentSlide]) {
                    dots[currentSlide].classList.add('active');
                }
            }

            const prevBtn = document.querySelector('#detail-modal-carousel-container .carousel-btn.prev');
            const nextBtn = document.querySelector('#detail-modal-carousel-container .carousel-btn.next');
            if (totalSlides <= 1) {
                prevBtn.classList.add('hidden');
                nextBtn.classList.add('hidden');
                paginationDots.style.display = 'none';
            } else {
                prevBtn.classList.remove('hidden');
                nextBtn.classList.remove('hidden');
                paginationDots.style.display = 'flex';
            }
        }

        // --- Initialize ---
        document.addEventListener('DOMContentLoaded', () => {
            updatePagination();

            // Populate static ratings
            document.getElementById('summary-rating-stars').innerHTML = generateStarRatingHTML(4, 20);
            document.getElementById('card-rating-1').innerHTML = generateStarRatingHTML(5, 16);
            document.getElementById('card-rating-2').innerHTML = generateStarRatingHTML(4, 16);

            // Modal Overlay Click
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target.id === overlay.id) {
                        closeModal(overlay.id);
                    }
                });
            });

            // Text Expand Button Check
            document.querySelectorAll('.written-review-card').forEach(card => {
                const reviewText = card.querySelector('.card-review-text');
                const expandToggle = card.querySelector('.expand-toggle');
                if (reviewText && expandToggle) {
                    const originalHeight = reviewText.clientHeight;
                    reviewText.classList.add('expanded');
                    reviewText.classList.remove('expanded');

                    if (reviewText.scrollHeight > originalHeight + 5) {
                        expandToggle.style.display = 'block';
                        expandToggle.textContent = '더보기';
                    } else {
                        expandToggle.style.display = 'none';
                    }
                }
            });
        });
    </script>
</body>

</html>