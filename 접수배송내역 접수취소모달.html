<!DOCTYPE html>

<html lang="ko">

<head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>접수 취소 (모바일 최적화)</title> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet"> <style> /* [v12] Master Guide CSS - Base */ * { box-sizing: border-box; margin: 0; padding: 0; }

    html,
    body {
        font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        background-color: #f4f5f7;
        color: #333;
        font-size: 16px;
        line-height: 1.6;
        height: 100%;
    }

    ul,
    li {
        list-style: none;
    }

    button {
        font-family: inherit;
        border: none;
        cursor: pointer;
        background: none;
        padding: 0;
    }

    input,
    textarea {
        font-family: inherit;
    }

    svg {
        stroke-width: 2;
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        flex-shrink: 0;
        display: block;
    }

    /* Layout */
    .mobile-wrap {
        width: 100%;
        max-width: 480px;
        margin: 0 auto;
        background-color: #ffffff;
        min-height: 100vh;
        padding-bottom: 20px;
    }

    /* Header (v12 Standard) */
    .app-header-sub {
        height: 56px;
        background: white;
        border-bottom: 1px solid #cccccc;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 16px;
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .header-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        cursor: pointer;
        transition: transform 0.2s;
        color: #333;
    }

    .header-btn:active {
        transform: scale(0.9);
    }

    .header-left {
        flex: 1 0 0;
        display: flex;
        justify-content: flex-start;
    }

    .header-title {
        flex: 3 0 0;
        font-size: 18px;
        font-weight: 600;
        text-align: center;
        color: #212121;
    }

    .header-right {
        flex: 1 0 0;
        display: flex;
        justify-content: flex-end;
        gap: 8px;
    }

    /* Buttons */
    .dark-button {
        background: #424242;
        color: white;
        height: 44px;
        padding: 0 19px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 600;
        width: 100%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    .white-button {
        background: white;
        color: #424242;
        height: 44px;
        padding: 0 19px;
        border-radius: 6px;
        border: 1px solid #e8e8e9;
        font-size: 14px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    .white-button-sm {
        height: 32px;
        font-size: 12px;
        padding: 0 12px;
        border-radius: 4px;
        background: white;
        border: 1px solid #d5d5d5;
        color: #555;
        font-weight: 500;
    }

    .dark-button:disabled {
        background-color: #e9ecef;
        color: #adb5bd;
        cursor: not-allowed;
    }

    /* Main Content */
    .sw-container {
        padding: 24px 20px;
    }

    /* Info Section */
    .info-section {
        background: #f8f8f9;
        border: 1px solid #e8e8e9;
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 16px;
    }

    .info-section .title {
        font-size: 14px;
        font-weight: 600;
        color: #555;
        margin-bottom: 12px;
    }

    .info-sub-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 6px 0;
        font-size: 14px;
    }

    .info-sub-row .label {
        color: #666;
    }

    .info-sub-row .value {
        color: #333;
        font-weight: 600;
    }

    .info-sub-row.total {
        margin-top: 8px;
        padding-top: 12px;
        border-top: 1px solid #e0e0e0;
    }

    .info-sub-row.total .value {
        color: #4e6ee4;
        font-size: 16px;
        font-weight: 700;
    }

    /* Disclaimer */
    .disclaimer {
        font-size: 12px;
        color: #888;
        margin-top: 8px;
        line-height: 1.5;
    }

    .disclaimer.list li {
        position: relative;
        padding-left: 12px;
        margin-bottom: 4px;
    }

    .disclaimer.list li::before {
        content: 'ⓘ';
        position: absolute;
        left: 0;
        top: 0;
        font-size: 10px;
    }

    /* [MODIFIED] Order Card Style (Reflecting Image) */
    .order-card {
        border: 1px solid #e8e8e9;
        border-radius: 8px;
        background: #fff;
        margin-bottom: 20px;
        overflow: hidden;
    }

    .oc-top-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        border-bottom: 1px solid #f5f5f5;
        font-size: 13px;
        color: #666;
    }

    .oc-top-right {
        display: flex;
        align-items: center;
        gap: 4px;
        font-weight: 600;
        color: #333;
    }

    .oc-body {
        padding: 16px;
    }

    .oc-status-row {
        display: flex;
        align-items: center;
        gap: 6px;
        margin-bottom: 8px;
    }

    .status-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background-color: #4e6ee4;
    }

    .status-text {
        font-size: 14px;
        font-weight: 600;
        color: #4e6ee4;
    }

    .oc-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-bottom: 12px;
    }

    .oc-tag {
        border: 1px solid #e0e0e0;
        border-radius: 100px;
        padding: 2px 10px;
        font-size: 12px;
        color: #555;
        background-color: #fff;
    }

    .oc-title {
        font-size: 14px;
        font-weight: 600;
        color: #222;
        margin-bottom: 12px;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
    }

    .oc-option-box {
        background-color: #f9f9f9;
        border-radius: 6px;
        padding: 12px;
        font-size: 12px;
        color: #666;
        line-height: 1.5;
    }

    .oc-file-link {
        display: flex;
        align-items: center;
        gap: 4px;
        margin-top: 8px;
        color: #4e6ee4;
        font-weight: 500;
        font-size: 12px;
        text-decoration: underline;
    }

    .oc-price-row {
        padding: 12px 16px;
        border-top: 1px solid #f0f0f0;
        text-align: right;
        font-size: 16px;
        font-weight: 700;
        color: #222;
    }

    .oc-price-sub {
        font-size: 12px;
        font-weight: 400;
        color: #888;
        margin-left: 4px;
    }

    /* Full Screen Modal Styles */
    .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
    }

    .modal-overlay.active {
        display: flex;
        animation: fadeIn 0.2s ease-out;
    }

    .modal-content.full-screen {
        width: 100%;
        height: 100%;
        max-width: 480px;
        background: white;
        display: flex;
        flex-direction: column;
        margin: 0 auto;
        position: relative;
    }

    .modal-header {
        height: 56px;
        padding: 0 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid #e8e8e9;
        flex-shrink: 0;
    }

    .modal-title {
        font-size: 18px;
        font-weight: 700;
        color: #222;
        flex: 1;
        text-align: left;
    }

    .btn-modal-close {
        width: 24px;
        height: 24px;
        cursor: pointer;
        color: #333;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal-body {
        flex: 1;
        overflow-y: auto;
        padding: 20px 16px;
    }

    .modal-footer {
        padding: 16px;
        border-top: 1px solid #e8e8e9;
        background: #fff;
        flex-shrink: 0;
    }

    /* Reason List Styles */
    .reason-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-bottom: 20px;
    }

    .reason-item {
        border: 1px solid #e8e8e9;
        border-radius: 6px;
        padding: 16px;
        background: white;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }

    .reason-item:hover {
        border-color: #ccc;
    }

    .reason-item.selected {
        border-color: #4e6ee4;
        background-color: #f9fbff;
    }

    .reason-label {
        font-size: 15px;
        font-weight: 600;
        color: #333;
    }

    .reason-desc {
        font-size: 13px;
        color: #888;
        line-height: 1.4;
        word-break: keep-all;
        margin-top: 4px;
    }

    .reason-item.selected .reason-label {
        color: #4e6ee4;
    }

    .reason-item .white-button-sm {
        margin-top: 12px;
        align-self: flex-start;
    }

    .reason-input-area {
        display: none;
        width: 100%;
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px dashed #e0e0e0;
    }

    .reason-item.selected .reason-input-area {
        display: block;
    }

    .full-textarea {
        width: 100%;
        height: 80px;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 10px;
        font-size: 14px;
        resize: none;
        outline: none;
        font-family: inherit;
    }

    /* Success & Detail Styles */
    .success-message {
        text-align: center;
        padding: 20px 0 30px;
    }

    .success-message h2 {
        font-size: 20px;
        font-weight: 700;
        margin-bottom: 8px;
        color: #222;
    }

    .stepper {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 20px 0 40px;
        position: relative;
    }

    .step-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        z-index: 2;
        width: 80px;
    }

    .step-circle {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #f0f0f0;
        color: #aaa;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 8px;
        transition: all 0.3s;
    }

    .step-circle svg {
        width: 20px;
        height: 20px;
    }

    .step-label {
        font-size: 12px;
        color: #aaa;
        font-weight: 500;
    }

    .step-item.active .step-circle {
        background: #4e6ee4;
        color: white;
    }

    .step-item.active .step-label {
        color: #333;
        font-weight: 600;
    }

    .stepper-line {
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 2px;
        background: #f0f0f0;
        z-index: 1;
    }

    .stepper.complete .stepper-line {
        background: #4e6ee4;
    }

    .status-msg {
        text-align: center;
        margin-bottom: 30px;
    }

    .status-msg p {
        font-size: 16px;
        font-weight: 600;
        color: #222;
        margin-bottom: 4px;
    }

    .status-msg span {
        font-size: 13px;
        color: #007bff;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }
</style>
</head>

<body>

<div class="mobile-wrap">
    <header class="app-header-sub">
        <div class="header-left">
            <button type="button" class="header-btn" onclick="history.back();">
                <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M15 6l-6 6l6 6" />
                </svg>
            </button>
        </div>
        <h1 class="header-title">접수 취소</h1>
        <div class="header-right"></div>
    </header>

    <main class="sw-container">
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <button class="white-button" onclick="startFlow('progress')">
                시나리오 1: 취소 신청 -> 진행 중
            </button>
            <button class="white-button" onclick="startFlow('complete')" style="width: 100%;">
                시나리오 2: 취소 신청 -> 취소 완료
            </button>
        </div>
    </main>
</div>

<div class="modal-overlay" id="modal-request">
    <div class="modal-content full-screen">
        <div class="modal-header">
            <div class="modal-title">접수 취소</div>
            <div class="btn-modal-close" onclick="closeModal('modal-request')">
                <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" viewBox="0 0 24 24">
                    <path d="M18 6l-12 12" />
                    <path d="M6 6l12 12" />
                </svg>
            </div>
        </div>
        <div class="modal-body">
            <h2 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">취소 사유를 선택해주세요</h2>

            <div class="reason-list" id="reason-list">
                <div class="reason-item" onclick="selectReason(this, 'modify')">
                    <div class="reason-label">데이터 수정</div>
                    <div class="reason-desc">데이터만 변경되는 경우 [파일 변경]을 통해 파일을 재업로드 할 수 있어요</div>
                    <button class="white-button white-button-sm" onclick="event.stopPropagation(); alert('파일 변경 페이지로 이동')">파일 변경</button>
                </div>
                <div class="reason-item" onclick="selectReason(this, 'edit_duplicate')">
                    <div class="reason-label">접수 내용 수정 / 중복 접수</div>
                    <div class="reason-desc">간단한 옵션 수정은 고객센터를 통해 수정할 수 있어요 (1599-5555)</div>
                </div>
                <div class="reason-item" onclick="selectReason(this, 'delivery')">
                    <div class="reason-label">배송지 / 배송 방법 변경</div>
                    <div class="reason-desc">조판 전까지 [배송지 변경] 또는 고객센터를 통해 변경할 수 있어요 (1599-5555)</div>
                    <button class="white-button white-button-sm" onclick="event.stopPropagation(); alert('배송지 변경 페이지로 이동')">배송지 변경</button>
                </div>
                <div class="reason-item" onclick="selectReason(this, 'cancel_simple')">
                    <div class="reason-label">접수 보류 / 원청 취소 / 단순 변심</div>
                </div>
                <div class="reason-item" onclick="selectReason(this, 'date_price')">
                    <div class="reason-label">출고일 / 제작 금액 조정 불가</div>
                </div>
                <div class="reason-item" onclick="selectReason(this, 'bill_payment')">
                    <div class="reason-label">계산서 발행 / 결제 변경 / 다른 아이디로 주문</div>
                </div>
                <div class="reason-item" onclick="selectReason(this, 'design')">
                    <div class="reason-label">디자인 신청</div>
                </div>
                <div class="reason-item" onclick="selectReason(this, 'other')">
                    <div class="reason-label">기타(직접입력)</div>
                    <div class="reason-input-area">
                        <textarea class="full-textarea" placeholder="취소 사유를 입력해주세요."></textarea>
                    </div>
                </div>
            </div>

            <ul class="disclaimer list">
                <li>성원머니로 10만원 미만 결제한 접수 건일 경우 바로 취소돼요</li>
                <li>그 외 접수건은 접수 담당자 확인 후 취소 처리가 진행돼요</li>
                <li>디자인 신청 접수 건일 경우, 디자인 작업이 시작된 이후에는 디자인 신청 비용이 환불되지 않아요</li>
            </ul>
        </div>
        <div class="modal-footer">
            <button class="dark-button" id="btn-submit-request" disabled onclick="submitCancellation()">취소 신청</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-success">
    <div class="modal-content full-screen">
        <div class="modal-header">
            <div class="modal-title">접수 취소</div>
            <div class="btn-modal-close" onclick="closeAllModals()">
                <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" viewBox="0 0 24 24">
                    <path d="M18 6l-12 12" />
                    <path d="M6 6l12 12" />
                </svg>
            </div>
        </div>
        <div class="modal-body">
            <div class="success-message">
                <h2>취소 신청이 완료되었어요</h2>
            </div>

            <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">취소 제품</h3>
            
            <div class="order-card">
                <div class="oc-body">
                    <div class="oc-title">
                        <span>[디지털엽서] A6 사이즈 양면 인쇄 접수</span>
                    </div>
                    <div class="oc-option-box">
                        용지: 아르떼 / 백색 / 230g | 인쇄: 양면 / CMYK / 금색 | 규격: 100x148mm | 가공: 오시 / 미싱
                    </div>
                </div>
            </div>

            <div class="info-section">
                <div class="title">환불 예정금액</div>
                <div class="info-sub-row total">
                    <span class="label">총 환불 예정금액</span>
                    <span class="value">₩8,500</span>
                </div>
                <div class="info-sub-row">
                    <span class="label">성원머니</span>
                    <span class="value">₩8,500</span>
                </div>
            </div>

            <ul class="disclaimer list">
                <li>결제금액 환불은 취소일로부터 3~5 영업일이 소요돼요 (카드/은행사에 따라 상이)</li>
                <li>성원머니로 결제했을 경우 성원머니로 환불 금액이 입금돼요</li>
            </ul>
        </div>
        <div class="modal-footer">
            <div style="display: flex; gap: 8px;">
                <button class="white-button" style="flex: 1;" onclick="goToDetail()">취소내역 상세</button>
                <button class="dark-button" style="flex: 1;" onclick="alert('재접수 프로세스')">동일 옵션으로 재접수</button>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-detail">
    <div class="modal-content full-screen">
        <div class="modal-header">
            <div class="modal-title">취소 상세</div>
            <div class="btn-modal-close" onclick="closeAllModals()">
                <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" viewBox="0 0 24 24">
                    <path d="M18 6l-12 12" />
                    <path d="M6 6l12 12" />
                </svg>
            </div>
        </div>
        <div class="modal-body">
            <div class="stepper" id="detail-stepper">
                <div class="stepper-line"></div>
                <div class="step-item active">
                    <div class="step-circle">
                        <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" viewBox="0 0 24 24">
                            <path d="M9 11l3 3l8 -8" />
                            <path d="M20 12v6a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h9" />
                        </svg>
                    </div>
                    <span class="step-label">취소 신청</span>
                </div>
                <div class="step-item" id="step-complete">
                    <div class="step-circle">
                        <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" viewBox="0 0 24 24">
                            <path d="M5 12l5 5l10 -10" />
                        </svg>
                    </div>
                    <span class="step-label">취소 완료</span>
                </div>
            </div>

            <div class="status-msg" id="status-message-area"></div>

            <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">취소 제품</h3>
            
            <div class="order-card">
                <div class="oc-body">
                    <div class="oc-title">
                        <span>[디지털엽서] A6 사이즈 양면 인쇄 접수</span>
                    </div>
                    <div class="oc-option-box">
                        용지: 아르떼 / 백색 / 230g | 인쇄: 양면 / CMYK / 금색 | 규격: 100x148mm | 가공: 오시 / 미싱
                    </div>
                </div>
            </div>

            <div class="info-section">
                <div class="info-sub-row">
                    <span class="label" style="width: 80px;">취소 사유</span>
                    <span class="value" style="flex:1; text-align:right;">접수 보류 / 원청 취소 / 단순 변심</span>
                </div>
            </div>

            <div class="info-section">
                <div class="title" id="refund-title">환불 예정금액</div>
                <div class="info-sub-row total">
                    <span class="label">총 환불 예정금액</span>
                    <span class="value">₩8,500</span>
                </div>
                <div class="info-sub-row">
                    <span class="label">성원머니</span>
                    <span class="value">₩8,500</span>
                </div>
            </div>

            <ul class="disclaimer list" id="detail-disclaimer">
                <li>결제금액 환불은 취소일로부터 3~5 영업일이 소요돼요 (카드/은행사에 따라 상이)</li>
                <li>성원머니로 결제했을 경우 성원머니로 환불 금액이 입금돼요</li>
            </ul>
        </div>
        <div class="modal-footer" id="detail-footer">
        </div>
    </div>
</div>

<script>
    let currentFlow = 'progress'; // 'progress' or 'complete'

    // --- Flow Control ---
    function startFlow(flowType) {
        currentFlow = flowType;
        openModal('modal-request');
    }

    // --- Modal Logic ---
    function openModal(id) {
        document.getElementById(id).classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function closeModal(id) {
        document.getElementById(id).classList.remove('active');
        // Check if any other modals are open
        if (!document.querySelector('.modal-overlay.active')) {
            document.body.style.overflow = '';
        }
    }

    function closeAllModals() {
        document.querySelectorAll('.modal-overlay').forEach(el => el.classList.remove('active'));
        document.body.style.overflow = '';
    }

    // --- Request Form Logic ---
    function selectReason(element, reasonCode) {
        // UI Toggle
        const list = document.getElementById('reason-list');
        list.querySelectorAll('.reason-item').forEach(item => item.classList.remove('selected'));
        element.classList.add('selected');

        // Enable Submit Button
        document.getElementById('btn-submit-request').disabled = false;
    }

    function submitCancellation() {
        closeModal('modal-request');
        openModal('modal-success');
    }

    // --- Navigation to Details ---
    function goToDetail() {
        closeModal('modal-success');
        setupDetailModal(currentFlow);
        openModal('modal-detail');
    }

    function setupDetailModal(status) {
        const stepperLine = document.querySelector('.stepper-line');
        const stepComplete = document.getElementById('step-complete');
        const statusArea = document.getElementById('status-message-area');
        const refundTitle = document.getElementById('refund-title');
        const footer = document.getElementById('detail-footer');

        if (status === 'progress') {
            // Stepper
            document.querySelector('.stepper').classList.remove('complete');
            stepComplete.classList.remove('active');

            // Message
            statusArea.innerHTML = `<p>접수 담당자가 취소 내역을 확인 중이에요</p>`;

            // Info
            refundTitle.textContent = "환불 예정금액";

            // Footer Button
            footer.innerHTML = `<button class="white-button" style="width:100%" onclick="alert('접수취소가 철회되었습니다.')">접수 취소 철회</button>`;
            footer.style.display = 'block';

        } else if (status === 'complete') {
            // Stepper
            document.querySelector('.stepper').classList.add('complete');
            stepComplete.classList.add('active');

            // Message
            const today = new Date().toISOString().slice(0, 10);
            statusArea.innerHTML = `
                <p>취소 처리가 완료되었어요 (${today})</p>
                <span>3~5일(영업일) 이내 환불 완료 예정이에요</span>
            `;

            // Info
            refundTitle.textContent = "최종 환불금액";

            // Footer (Empty for completed state)
            footer.innerHTML = ``;
            footer.style.display = 'none';
        }
    }
</script>
</body>

</html>